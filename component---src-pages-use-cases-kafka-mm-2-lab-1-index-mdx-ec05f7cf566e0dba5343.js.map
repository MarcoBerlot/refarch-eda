{"version":3,"sources":["webpack:///./node_modules/gatsby-theme-carbon/src/components/PageHeader/index.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/PageHeader/PageHeader.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/EditLink/index.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/EditLink/EditLink.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/PageTabs/index.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/PageTabs/PageTabs.js","webpack:///./node_modules/gatsby-theme-carbon/src/templates/Default.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/EditLink/EditLink.module.scss","webpack:///./node_modules/gatsby-theme-carbon/src/components/PageTabs/PageTabs.module.scss","webpack:///./src/pages/use-cases/kafka-mm2/lab-1/index.mdx","webpack:///./node_modules/gatsby-theme-carbon/src/components/PageHeader/PageHeader.module.scss"],"names":["PageHeader","title","tabs","className","cx","pageHeader","withTabs","length","id","text","EditLink","relativePagePath","repositoryProp","repository","useStaticQuery","site","siteMetadata","baseUrl","subDirectory","href","branch","row","link","PageTabs","render","this","props","slug","currentTab","split","filter","Boolean","slice","pageTabs","map","tab","slugifiedTab","slugify","lower","strict","selected","currentTabRegex","RegExp","replace","key","selectedItem","listItem","to","tabsContainer","list","React","Component","Default","pageContext","children","location","Title","frontmatter","titleType","theme","description","keywords","pathPrefix","pathname","Layout","homepage","pageTitle","pageDescription","pageKeywords","label","Main","padded","NextPrevious","Utils","module","exports","_frontmatter","makeShortcode","name","console","warn","AnchorLinks","AnchorLink","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","isMDXComponent"],"mappings":"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","file":"component---src-pages-use-cases-kafka-mm-2-lab-1-index-mdx-ec05f7cf566e0dba5343.js","sourcesContent":["import PageHeader from './PageHeader';\n\nexport default PageHeader;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport { pageHeader, withTabs, text } from './PageHeader.module.scss';\n\nconst PageHeader = ({ title, tabs = [] }) => (\n  <div className={cx(pageHeader, { [withTabs]: tabs.length })}>\n    <div className=\"bx--grid\">\n      <div className=\"bx--row\">\n        <div className=\"bx--col-lg-12\">\n          <h1 id=\"page-title\" className={text}>\n            {title}\n          </h1>\n        </div>\n      </div>\n    </div>\n  </div>\n);\n\nPageHeader.propTypes = {\n  /**\n   * Specify the title for the page\n   */\n  title: PropTypes.node,\n};\n\nexport default PageHeader;\n","import EditLink from './EditLink';\n\nexport default EditLink;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { graphql, useStaticQuery } from 'gatsby';\n\nimport { link, row } from './EditLink.module.scss';\n\nconst EditLink = ({ relativePagePath, repository: repositoryProp }) => {\n  const {\n    site: {\n      siteMetadata: { repository },\n    },\n  } = useStaticQuery(graphql`\n    query REPOSITORY_QUERY {\n      site {\n        siteMetadata {\n          repository {\n            baseUrl\n            subDirectory\n            branch\n          }\n        }\n      }\n    }\n  `);\n\n  const { baseUrl, subDirectory, branch } = repositoryProp || repository;\n\n  const href = `${baseUrl}/edit/${branch}${subDirectory}/src/pages${relativePagePath}`;\n\n  return baseUrl ? (\n    <div className={`bx--row ${row}`}>\n      <div className=\"bx--col\">\n        <a className={link} href={href}>\n          Edit this page on GitHub\n        </a>\n      </div>\n    </div>\n  ) : null;\n};\n\nEditLink.propTypes = {\n  repository: PropTypes.shape({\n    baseUrl: PropTypes.string,\n    subDirectory: PropTypes.string,\n    branch: PropTypes.string,\n  }),\n  relativePagePath: PropTypes.string,\n};\n\nexport default EditLink;\n","import PageTabs from './PageTabs';\n\nexport default PageTabs;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'gatsby';\nimport slugify from 'slugify';\nimport cx from 'classnames';\n\nimport {\n  tabsContainer,\n  list,\n  selectedItem,\n  listItem,\n  link,\n} from './PageTabs.module.scss';\n\nexport default class PageTabs extends React.Component {\n  render() {\n    const { tabs, slug } = this.props;\n    const currentTab = slug.split('/').filter(Boolean).slice(-1)[0];\n\n    const pageTabs = tabs.map((tab) => {\n      const slugifiedTab = slugify(tab, { lower: true, strict: true });\n      const selected = slugifiedTab === currentTab;\n      // matches with or without trailing slash: /?\n      // matches with or without hash link: (#.*)?\n      const currentTabRegex = new RegExp(`${currentTab}/?(#.*)?$`);\n      const href = slug.replace(currentTabRegex, slugifiedTab);\n      return (\n        <li key={tab} className={cx({ [selectedItem]: selected }, listItem)}>\n          <Link className={link} to={`${href}`}>\n            {tab}\n          </Link>\n        </li>\n      );\n    });\n\n    return (\n      <div className={tabsContainer}>\n        <div className=\"bx--grid\">\n          <div className=\"bx--row\">\n            <div className=\"bx--col-lg-12 bx--col-no-gutter\">\n              <nav>\n                <ul className={list}>{pageTabs}</ul>\n              </nav>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nPageTabs.propTypes = {\n  tabs: PropTypes.array,\n  slug: PropTypes.string,\n};\n","import React from 'react';\nimport slugify from 'slugify';\nimport { useStaticQuery, graphql } from 'gatsby';\n\nimport Utils from '../components/Utils';\nimport Layout from '../components/Layout';\nimport PageHeader from '../components/PageHeader';\nimport EditLink from '../components/EditLink';\nimport NextPrevious from '../components/NextPrevious';\nimport PageTabs from '../components/PageTabs';\nimport Main from '../components/Main';\n\nconst Default = ({ pageContext, children, location, Title }) => {\n  const { frontmatter = {}, relativePagePath, titleType } = pageContext;\n  const { tabs, title, theme, description, keywords } = frontmatter;\n\n  // get the path prefix if it exists\n  const {\n    site: { pathPrefix },\n  } = useStaticQuery(graphql`\n    query PATH_PREFIX_QUERY {\n      site {\n        pathPrefix\n      }\n    }\n  `);\n\n  // let gatsby handle prefixing\n  const slug = pathPrefix\n    ? location.pathname.replace(pathPrefix, '')\n    : location.pathname;\n\n  const getCurrentTab = () => {\n    if (!tabs) return '';\n    return (\n      slug.split('/').filter(Boolean).slice(-1)[0] ||\n      slugify(tabs[0], { lower: true })\n    );\n  };\n\n  const currentTab = getCurrentTab();\n\n  return (\n    <Layout\n      tabs={tabs}\n      homepage={false}\n      theme={theme}\n      pageTitle={title}\n      pageDescription={description}\n      pageKeywords={keywords}\n      titleType={titleType}>\n      <PageHeader title={Title ? <Title /> : title} label=\"label\" tabs={tabs} />\n      {tabs && <PageTabs slug={slug} tabs={tabs} currentTab={currentTab} />}\n      <Main padded>\n        {children}\n        <EditLink relativePagePath={relativePagePath} />\n      </Main>\n      <NextPrevious\n        pageContext={pageContext}\n        location={location}\n        slug={slug}\n        tabs={tabs}\n        currentTab={currentTab}\n      />\n      <Utils />\n    </Layout>\n  );\n};\n\nexport default Default;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bxTextTruncateEnd\":\"EditLink-module--bx--text-truncate--end--2pqje\",\"bxTextTruncateFront\":\"EditLink-module--bx--text-truncate--front--3_lIE\",\"link\":\"EditLink-module--link--1qzW3\",\"row\":\"EditLink-module--row--1B9Gk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bxTextTruncateEnd\":\"PageTabs-module--bx--text-truncate--end--267NA\",\"bxTextTruncateFront\":\"PageTabs-module--bx--text-truncate--front--3xEQF\",\"tabsContainer\":\"PageTabs-module--tabs-container--8N4k0\",\"list\":\"PageTabs-module--list--3eFQc\",\"listItem\":\"PageTabs-module--list-item--nUmtD\",\"link\":\"PageTabs-module--link--1mDJ1\",\"selectedItem\":\"PageTabs-module--selected-item--YPVr3\"};","import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/refarch-eda/refarch-eda/docs/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component '\" + name + \"' was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst AnchorLinks = makeShortcode(\"AnchorLinks\");\nconst AnchorLink = makeShortcode(\"AnchorLink\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <AnchorLinks mdxType=\"AnchorLinks\">\n  <AnchorLink mdxType=\"AnchorLink\">Overview</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Start the local Kafka cluster</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Start Mirror Maker 2</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Start Consumer from target cluster</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Start Producer to source cluster</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Clean up</AnchorLink>\n    </AnchorLinks>\n    <p>{`Updated 01/08/2021`}</p>\n    <h2>{`Overview`}</h2>\n    <p>{`For this scenario the source cluster is an Event Streams on IBM Cloud as managed service, and the target is a local Kafka cluster running with docker compose: it simulates an on-premise deployment. The figure below presents the components used:`}</p>\n    <span {...{\n      \"className\": \"gatsby-resp-image-wrapper\",\n      \"style\": {\n        \"position\": \"relative\",\n        \"display\": \"block\",\n        \"marginLeft\": \"auto\",\n        \"marginRight\": \"auto\",\n        \"maxWidth\": \"1152px\"\n      }\n    }}>{`\n      `}<span parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-background-image\",\n        \"style\": {\n          \"paddingBottom\": \"39.23611111111111%\",\n          \"position\": \"relative\",\n          \"bottom\": \"0\",\n          \"left\": \"0\",\n          \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABqklEQVQoz2WSy2oUQRSG55F8B9/BN3EhunOjb+AyQkAIKhg3ulIxhBhGVMZJQOeWCGaSmemZ9KUuXVX9+Xcn6iIHTlVTferU9/9VPWMayiriPcQIyyWczROrLGFtg3VgDDifqILFBk8Cao3nbqM1160Z5WXt6JVloI3FYkH/c5/Z7BdF6TDWU6nTKlsTQqIsAqvLgqJwDAdHfB8MyatCEGrfQNJs6khvmVmGP0+YTSdsbT3l02GflCIxtRyqxHV0i7UOEIGXlN3dV+w8f0Ge5wTJstZqT6KOgZ6xgenFBb83NetOvhOZxTnLfO54/yFoU2K5rkVQdxvbKFy4rpMazS1pEEhvMm64/2TBvWc/2Nk7V4FhuHfKy4f7bD845O3rQlSBTA19a3IXDXXiRsQm0RuNI1++SmJz5eVwfMq7wTcGJ1OOz0ZaMSKQ5DxgogjlQtRQ1Y2+G5rr/NfQ+/bUv36B1/3dOXjM7f273Np+xJuPpvuXlTJdHul+5JXq4k3C1DYsq4a8iJTlVRbKbON0g5bRJHB8JHmi8dJYRXkWPVbpkp5K/J+2mx1/ADMQX6Ab2o1kAAAAAElFTkSuQmCC')\",\n          \"backgroundSize\": \"cover\",\n          \"display\": \"block\"\n        }\n      }}></span>{`\n  `}<img parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-image\",\n        \"alt\": \"1\",\n        \"title\": \"1\",\n        \"src\": \"/refarch-eda/static/0a45a1c44dd5b86e29b5bd3ca88a9413/3cbba/mm2-lab1.png\",\n        \"srcSet\": [\"/refarch-eda/static/0a45a1c44dd5b86e29b5bd3ca88a9413/7fc1e/mm2-lab1.png 288w\", \"/refarch-eda/static/0a45a1c44dd5b86e29b5bd3ca88a9413/a5df1/mm2-lab1.png 576w\", \"/refarch-eda/static/0a45a1c44dd5b86e29b5bd3ca88a9413/3cbba/mm2-lab1.png 1152w\", \"/refarch-eda/static/0a45a1c44dd5b86e29b5bd3ca88a9413/74097/mm2-lab1.png 1690w\"],\n        \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n        \"style\": {\n          \"width\": \"100%\",\n          \"height\": \"100%\",\n          \"margin\": \"0\",\n          \"verticalAlign\": \"middle\",\n          \"position\": \"absolute\",\n          \"top\": \"0\",\n          \"left\": \"0\"\n        },\n        \"loading\": \"lazy\"\n      }}></img>{`\n    `}</span>\n    <ol>\n      <li parentName=\"ol\">{`Mirror maker 2 runs in standalone mode on local server`}</li>\n      <li parentName=\"ol\">{`A python producer write to `}<inlineCode parentName=\"li\">{`products`}</inlineCode>{` topic defined on Evenstreams on IBM Cloud `}</li>\n      <li parentName=\"ol\">{`A consumer using Kafka console consumer tool to validate the replicated records from the ‘products’ topic`}</li>\n    </ol>\n    <p>{`As a pre-requisite you need to run your local cluster by using the docker compose as introduced in `}<a parentName=\"p\" {...{\n        \"href\": \"/refarch-eda/use-cases/kafka-mm2/#pre-requisites\"\n      }}>{`this note`}</a>{`.`}</p>\n    <h2>{`Start the local Kafka cluster`}</h2>\n    <p>{`In the `}<inlineCode parentName=\"p\">{`refarch-eda-tools/labs/mirror-maker2/es-ic-to-local`}</inlineCode>{` folder there is a `}<a parentName=\"p\" {...{\n        \"href\": \"https://raw.githubusercontent.com/refarch-eda-tools/labs/mirror-maker2/es-ic-to-local/master/docker-compose.yml\"\n      }}>{`docker compose file`}</a>{` to start a local three brokers cluster with one Zookeeper node.`}</p>\n    <ol>\n      <li parentName=\"ol\">{`In one Terminal window, start the local cluster using the command:`}</li>\n    </ol>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`docker-compose up -d\n`}</code></pre>\n    <p>{`The data are persisted on the local disk within the folder named `}<inlineCode parentName=\"p\">{`kafka-data`}</inlineCode>{`.`}</p>\n    <p>{`Your local environment is up and running.`}</p>\n    <h2>{`Start Mirror Maker 2`}</h2>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Rename the `}<inlineCode parentName=\"p\">{`.env-tmpl`}</inlineCode>{` file to `}<inlineCode parentName=\"p\">{`.env`}</inlineCode></p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`From Event Streams on Cloud > Service Credentials, get the brokers address and the APIKEY. If needed read `}<a parentName=\"p\" {...{\n            \"href\": \"/refarch-eda/technology/event-streams/security/#authentication-with-api-keys\"\n          }}>{`this note`}</a>{`.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`If not done already, create a `}<inlineCode parentName=\"p\">{`products`}</inlineCode>{` topic (with one partition) in the EventStreams on Cloud cluster using the management console. See `}<a parentName=\"p\" {...{\n            \"href\": \"/refarch-eda/technology/event-streams/es-cloud/#create-topic\"\n          }}>{`this note`}</a>{` if needed, to see how to do it.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Modify this `}<inlineCode parentName=\"p\">{`.env`}</inlineCode>{` file to set environment variables for Source Event Streams cluster brokers address and APIKEY.`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`ES_IC_BROKERS=broker-0-q.....cloud.ibm.com:9093\nES_IC_USER=token\nES_IC_PASSWORD=\"<replace with apikey from event streams service credentials>\"\nES_IC_SASL_MECHANISM=PLAIN\nES_IC_LOGIN_MODULE=org.apache.kafka.common.security.plain.PlainLoginModule\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`To configure Mirror Maker 2 in standalone mode, we need to define a `}<inlineCode parentName=\"p\">{`mm2.properties`}</inlineCode>{` file. We have define a template file which will be used by the script that launch Mirror Maker 2. The template looks like the following declaration:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-properties\"\n          }}>{`clusters=es-ic, target\nes-ic.bootstrap.servers=KAFKA_SOURCE_BROKERS\ntarget.bootstrap.servers=KAFKA_TARGET_BROKERS\n\nes-ic.security.protocol=SASL_SSL\nes-ic.ssl.protocol=TLSv1.2\nes-ic.ssl.endpoint.identification.algorithm=https\nes-ic.sasl.mechanism=SOURCE_KAFKA_SASL_MECHANISM\nes-ic.sasl.jaas.config=SOURCE_LOGIN_MODULE required username=KAFKA_SOURCE_USER password=KAFKA_SOURCE_PASSWORD;\nsync.topic.acls.enabled=false\nreplication.factor=1\ninternal.topic.replication.factor=1\nes-ic.offset.storage.topic=mm2-cluster-offsets\nes-ic.configs.storage.topic=mm2-cluster-configs\nes-ic.status.storage.topic=mm2-cluster-status\n# enable and configure individual replication flows\nes-ic->target.enabled=true\nes-ic->target.topics=products\n`}</code></pre>\n        <p parentName=\"li\">{`A lot of those properties are for the security settings. The `}<inlineCode parentName=\"p\">{`clusters`}</inlineCode>{` property defines the alias name for the source to target, and then the `}<inlineCode parentName=\"p\">{`es-ic->target.*`}</inlineCode>{` properties define the topic to replicate…`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Start Mirror Maker2 using the launch script:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`# In the  es-ic-to-local folder\n./launchMM2.sh\n`}</code></pre>\n        <p parentName=\"li\">{`This script updates the properties file from the environment variables defined in the `}<inlineCode parentName=\"p\">{`.env`}</inlineCode>{` file and starts a Kafka container with a command very similar as:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{` docker run -ti --network es-ic-to-local_default -v $(pwd):/home -v $(pwd)/mirror-maker-2/logs:/opt/kafka/logs strimzi/kafka:latest-kafka-2.6.0 /bin/bash -c \"/opt/kafka/bin/connect-mirror-maker.sh /home/mirror-maker-2/es-to-local/mm2.properties\"\n`}</code></pre>\n        <p parentName=\"li\">{`The `}<inlineCode parentName=\"p\">{`mm2.properties`}</inlineCode>{` file is mounted in the `}<inlineCode parentName=\"p\">{`/home`}</inlineCode>{` within the container.\n`}<em parentName=\"p\">{`The network argument is important to get the host names resolved and the connector to connect to Kafka Brokers`}</em></p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Verify the MM2 topics are created:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`docker exec -ti kafka1 /bin/bash -c \"/opt/kafka/bin/kafka-topics.sh --bootstrap-server kafka1:9091 --list\"\n\n __consumer_offsets\n es-ic.checkpoints.internal\n es-ic.products\n es-ic.source.heartbeats\n heartbeats\n mm2-configs.es-ic.internal\n mm2-offsets.es-ic.internal\n mm2-status.es-ic.internal\n`}</code></pre>\n      </li>\n    </ol>\n    <h3>{`Understanding MirrorMaker 2 trace`}</h3>\n    <p>{`A lot of configuration validation at the beginning of the trace to get the connection to both clusters. Any configuration issue to define the connection is generally well reported. URL, TLS certificate, secrets are the common cause of connection issues.`}</p>\n    <p>{`If some messages happen with NO_LEADER for one of the topics, this means MM2 is not able to create the topic on the target cluster and so it is needed to create the topic with command or User Interface.`}</p>\n    <p>{`Then we can observe the following:`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`It creates a producer to the target cluster for the offsets topics: `}<inlineCode parentName=\"p\">{` [Producer clientId=producer-1] Cluster ID: Bj7Ui3UPQaKtJx7HOkWxPw`}</inlineCode></p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`It creates consumer for the 25 offset topic partitions: `}<inlineCode parentName=\"p\">{`[Consumer clientId=consumer-mirrormaker2-cluster-1, groupId=mirrormaker2-cluster] Subscribed to partition(s): mirrormaker2-cluster-offsets-0,....`}</inlineCode></p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`One Kafka connect worker is started: `}<inlineCode parentName=\"p\">{`Worker started ... Starting KafkaBasedLog with topic mirrormaker2-cluster-status`}</inlineCode></p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Create a producer and consumers for the `}<inlineCode parentName=\"p\">{` mirrormaker2-cluster-status`}</inlineCode>{` topic for 5 partitions`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Create another producer and consumer for the `}<inlineCode parentName=\"p\">{`mirrormaker2-cluster-config`}</inlineCode>{` topic`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Create WorkerSourceTask{id=es-1->es-ic.MirrorHeartbeatConnector-0} is the connector - task for the internal HeartBeat.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`WorkerSourceTask{id=es-1->es-ic.MirrorSourceConnector-0} for the topic to replicate`}</p>\n      </li>\n    </ul>\n    <h2>{`Start consumer from target cluster`}</h2>\n    <p>{`Use Apache Kafka tool like Console consumer to trace the message received on a topic`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`docker exec -ti kafka2 bash -c \"/opt/kafka/bin/kafka-console-consumer.sh --bootstrap-server kafka1:9091 --topic es-ic.products --from-beginning\" \n`}</code></pre>\n    <h2>{`Start Producer to source cluster`}</h2>\n    <p>{`We are reusing a python environment as defined in the integration tests for the ‘kcontainer’ solution. `}<a parentName=\"p\" {...{\n        \"href\": \"https://hub.docker.com/r/ibmcase/kcontainer-python\"\n      }}>{`https://hub.docker.com/r/ibmcase/kcontainer-python`}</a>{`.`}</p>\n    <p>{`This time the script is producing products data. Here are the steps to send 5 records.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`# in the es-ic-to-local folder\n./sendProductRecords.sh\n`}</code></pre>\n    <p>{`The traces should look like:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`[KafkaProducer] - {'bootstrap.servers': 'broker-0-qnprtqnp7hnkssdz.kafka.svc01.us-east.eventstreams.cloud.ibm.com:9093,broker-1-qnprtqnp7hnkssdz.kafka.svc01.us-east.eventstreams.cloud.ibm.com:9093,broker-2-qnprtqnp7hnkssdz.kafka.svc01.us-east.eventstreams.cloud.ibm.com:9093,broker-3-qnprtqnp7hnkssdz.kafka.svc01.us-east.eventstreams.cloud.ibm.com:9093,broker-4-qnprtqnp7hnkssdz.kafka.svc01.us-east.eventstreams.cloud.ibm.com:9093,broker-5-qnprtqnp7hnkssdz.kafka.svc01.us-east.eventstreams.cloud.ibm.com:9093', 'group.id': 'ProductsProducer', 'delivery.timeout.ms': 15000, 'request.timeout.ms': 15000, 'security.protocol': 'SASL_SSL', 'sasl.mechanisms': 'PLAIN', 'sasl.username': 'token', 'sasl.password': '..hidden...'}\n{'product_id': 'P01', 'description': 'Carrots', 'target_temperature': 4, 'target_humidity_level': 0.4, 'content_type': 1}\n{'product_id': 'P02', 'description': 'Banana', 'target_temperature': 6, 'target_humidity_level': 0.6, 'content_type': 2}\n{'product_id': 'P03', 'description': 'Salad', 'target_temperature': 4, 'target_humidity_level': 0.4, 'content_type': 1}\n{'product_id': 'P04', 'description': 'Avocado', 'target_temperature': 6, 'target_humidity_level': 0.4, 'content_type': 1}\n{'product_id': 'P05', 'description': 'Tomato', 'target_temperature': 4, 'target_humidity_level': 0.4, 'content_type': 2}\n[KafkaProducer] - Message delivered to products [0]\n[KafkaProducer] - Message delivered to products [0]\n[KafkaProducer] - Message delivered to products [0]\n[KafkaProducer] - Message delivered to products [0]\n[KafkaProducer] - Message delivered to products [0]\n`}</code></pre>\n    <p>{`Validate the replication is done from the consumer terminal`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`\n{ \"product_id\": \"P01\", \"description\": \"Carrots\", \"target_temperature\": 4,\"target_humidity_level\": 0.4,\"content_type\": 1}\n{ \"product_id\": \"P02\", \"description\": \"Banana\", \"target_temperature\": 6,\"target_humidity_level\": 0.6,\"content_type\": 2}\n{ \"product_id\": \"P03\", \"description\": \"Salad\", \"target_temperature\": 4,\"target_humidity_level\": 0.4,\"content_type\": 1}\n`}</code></pre>\n    <p>{`Stop producer with Ctrl C.`}</p>\n    <h2>{`Clean up`}</h2>\n    <p>{`You are done with the lab, to stop everything:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`# stop mirror maker 2\ndocker stop mm2\n# stop local kafka cluster\ndocker-compose down\nrm -r logs\nrm -r kafka-data/\n`}</code></pre>\n    <p>{`Or run `}<inlineCode parentName=\"p\">{`cleanLab.sh`}</inlineCode></p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      ","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bxTextTruncateEnd\":\"PageHeader-module--bx--text-truncate--end--mZWeX\",\"bxTextTruncateFront\":\"PageHeader-module--bx--text-truncate--front--3zvrI\",\"pageHeader\":\"PageHeader-module--page-header--3hIan\",\"withTabs\":\"PageHeader-module--with-tabs--3nKxA\",\"text\":\"PageHeader-module--text--o9LFq\"};"],"sourceRoot":""}