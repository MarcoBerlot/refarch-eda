(window.webpackJsonp=window.webpackJsonp||[]).push([[74,93],{"013z":function(e,a,t){"use strict";var n=t("q1tI"),c=t.n(n),r=t("NmYn"),o=t.n(r),i=t("Wbzz"),s=t("Xrax"),l=t("k4MR"),b=t("TSYQ"),p=t.n(b),m=t("QH2O"),d=t("qKvR"),g=function(e){var a,t=e.title,n=e.tabs,c=void 0===n?[]:n;return Object(d.b)("div",{className:p()(m.pageHeader,(a={},a[m.withTabs]=c.length,a))},Object(d.b)("div",{className:"bx--grid"},Object(d.b)("div",{className:"bx--row"},Object(d.b)("div",{className:"bx--col-lg-12"},Object(d.b)("h1",{id:"page-title",className:m.text},t)))))},u=t("BAC9"),h=function(e){var a=e.relativePagePath,t=e.repository,n=Object(i.useStaticQuery)("1364590287").site.siteMetadata.repository,c=t||n,r=c.baseUrl,o=c.subDirectory,s=r+"/edit/"+c.branch+o+"/src/pages"+a;return r?Object(d.b)("div",{className:"bx--row "+u.row},Object(d.b)("div",{className:"bx--col"},Object(d.b)("a",{className:u.link,href:s},"Edit this page on GitHub"))):null},f=t("FCXl"),A=t("dI71"),O=t("I8xM"),j=function(e){function a(){return e.apply(this,arguments)||this}return Object(A.a)(a,e),a.prototype.render=function(){var e=this.props,a=e.tabs,t=e.slug,n=t.split("/").filter(Boolean).slice(-1)[0],c=a.map((function(e){var a,c=o()(e,{lower:!0,strict:!0}),r=c===n,s=new RegExp(n+"/?(#.*)?$"),l=t.replace(s,c);return Object(d.b)("li",{key:e,className:p()((a={},a[O.selectedItem]=r,a),O.listItem)},Object(d.b)(i.Link,{className:O.link,to:""+l},e))}));return Object(d.b)("div",{className:O.tabsContainer},Object(d.b)("div",{className:"bx--grid"},Object(d.b)("div",{className:"bx--row"},Object(d.b)("div",{className:"bx--col-lg-12 bx--col-no-gutter"},Object(d.b)("nav",null,Object(d.b)("ul",{className:O.list},c))))))},a}(c.a.Component),N=t("MjG9");a.a=function(e){var a=e.pageContext,t=e.children,n=e.location,c=e.Title,r=a.frontmatter,b=void 0===r?{}:r,p=a.relativePagePath,m=a.titleType,u=b.tabs,A=b.title,O=b.theme,k=b.description,w=b.keywords,S=Object(i.useStaticQuery)("2456312558").site.pathPrefix,E=S?n.pathname.replace(S,""):n.pathname,C=u?E.split("/").filter(Boolean).slice(-1)[0]||o()(u[0],{lower:!0}):"";return Object(d.b)(l.a,{tabs:u,homepage:!1,theme:O,pageTitle:A,pageDescription:k,pageKeywords:w,titleType:m},Object(d.b)(g,{title:c?Object(d.b)(c,null):A,label:"label",tabs:u}),u&&Object(d.b)(j,{slug:E,tabs:u,currentTab:C}),Object(d.b)(N.a,{padded:!0},t,Object(d.b)(h,{relativePagePath:p})),Object(d.b)(f.a,{pageContext:a,location:n,slug:E,tabs:u,currentTab:C}),Object(d.b)(s.a,null))}},"4zw4":function(e,a,t){"use strict";t.r(a),t.d(a,"_frontmatter",(function(){return i})),t.d(a,"default",(function(){return d}));var n=t("wx14"),c=t("zLVn"),r=(t("q1tI"),t("7ljp")),o=t("013z"),i=(t("qKvR"),{}),s=function(e){return function(a){return console.warn("Component '"+e+"' was not imported, exported, or provided by MDXProvider as global scope"),Object(r.b)("div",a)}},l=s("AnchorLinks"),b=s("AnchorLink"),p={_frontmatter:i},m=o.a;function d(e){var a=e.components,t=Object(c.a)(e,["components"]);return Object(r.b)(m,Object(n.a)({},p,t,{components:a,mdxType:"MDXLayout"}),Object(r.b)("p",null,"This scenario uses the ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/ibm-messaging/kafka-connect-mq-sink"}),"IBM Kafka Connect sink connector for IBM MQ")," to pull streaming data from Kafka topic into a MQ queue. We can have multiple deployment combinations but we will limit to two patterns:"),Object(r.b)(l,{mdxType:"AnchorLinks"},Object(r.b)(b,{mdxType:"AnchorLink"},"MQ Sink Connector, MQ,and Kafka on OpenShift"),Object(r.b)(b,{mdxType:"AnchorLink"},"MQ Sink Connector on virtual or baremetal server, MQ and Event Streams on IBM Cloud")),Object(r.b)("h2",null,"Pre-requisites"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Get a Git client")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Clone the MQ Sink connector")," using the command:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),"git clone https://github.com/ibm-messaging/kafka-connect-mq-sink.git\n")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Clone the Lab repository")," to get configuration files. This lab is under ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/ibm-cloud-architecture/refarch-eda-tools/tree/master/labs/mq-sink-lab/"}),"labs/mq-sink-lab/")," folder."),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),"git clone https://github.com/ibm-cloud-architecture/refarch-eda-tools.git\n")),Object(r.b)("h2",null,"MQ Sink Connector, MQ, Kafka on OpenShift"),Object(r.b)("p",null,"The target deployment looks like in the following diagram:"),Object(r.b)("p",null," ",Object(r.b)("span",Object(n.a)({parentName:"p"},{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}}),"\n      ",Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"57.98611111111111%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACSUlEQVQoz2WTS2sUQRSF51+5ERHcutE/4CKoiARdCPoHBBVCFBcquBF8bAxxIa40btxESJA4GZMJMTrjzPS8p7r6Xd31eatnJky04HCrblcdzj33doUopEToYgTxAubn+Z0TWPweYd3eWipZmGLSnDw1Eg1pnJfIHJIZ4n+QGPJsijR27woIAmxRUOmODDtN2KrD9iH8Glp0YJFvFJbjmBelAFRcsNOAzT34ug+1lpUcUqGozHMqvUFEvRWy3wjZawY0+qFULy//W/OcwRuHtAZT9FRAKFXYQGxwhGqsydJQShbJRsgCXxQWBFGBP4tJaomT6fnDl5C1j4r1zz7rGw4Kb1CUvpYK257P71FOtZWy1cioNbXYkdOT3GY1YetHwkjlpbbuMOf8TY/TSx3OXfM4c7nD2SsdtvcyyCIKI4RHLc2nuuH995gXmwkbNS0qc6LE+WjJzBRuDYX44q0upy61uSDRkZ1eavOtvkCoxsEJp5I4ZqKmhMfu2em+0zfceTzi2ZrP83c+T976PF1T1I4MpDPCwI9RasLublWaocWrjPHESLTHzZgTdsWGGytDVl8pVl8rVl5OePRmQvXQTBU6DycjTa8/Yr/eoNtTQqZRfo4Oi7IRkTQkkoq0dL7VMdx+OOTq3T7LDwZcvzdg+X6fg8ZMoSNMpeXSedoe/OnIOMVCkEjpQiLzSxLmJDJonlfQ+JnRbablbC6uzM2ozGE5NtbXs99OWGNpvZt4rXF5K3nb7mDrBzAZO/byXqFn8B10eR/fL635C9OrhK1wZZupAAAAAElFTkSuQmCC')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(r.b)("img",Object(n.a)({parentName:"span"},{className:"gatsby-resp-image-image",alt:"1",title:"1",src:"/refarch-eda/static/7f08c155d65695d6d8a840745ae86087/3cbba/all-ocp.png",srcSet:["/refarch-eda/static/7f08c155d65695d6d8a840745ae86087/7fc1e/all-ocp.png 288w","/refarch-eda/static/7f08c155d65695d6d8a840745ae86087/a5df1/all-ocp.png 576w","/refarch-eda/static/7f08c155d65695d6d8a840745ae86087/3cbba/all-ocp.png 1152w","/refarch-eda/static/7f08c155d65695d6d8a840745ae86087/12736/all-ocp.png 1206w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    ")),Object(r.b)("p",null,"Kafka is runnning in its own namespace, and we are using Event Streams from Cloud Pack for Integration."),Object(r.b)("h3",null,"Pre-requisites"),Object(r.b)("p",null,"We assume that you have an instance of Event Streams already running on OpenShift, with a TLS authentication user type. See ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"../../use-cases/overview/pre-requisites#getting-scram-authentication-from-event-streams-on-openshift"}),"those instructions")," to get those credentials."),Object(r.b)("p",null,"The MQ broker is running on OpenShift and was created using kubernetes operators: we have documented a simple how to guide in ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"../../technology/mq#installation-with-cloud-pak-for-integration"}),"this MQ summary"),". The instance is exposed via a Route so we can access the administration console using the admin credentials of Cloud Pak for Integration."),Object(r.b)("h3",null,"Setup MQ Channel"),Object(r.b)("p",null,"Open a shell on the remote container or use the user interface to define the communication channel to use for the Kafka Connection."),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Using CLI: Change the name of the Q manager to reflect what you defined in MQ configuration.")),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),"runmqsc EDAQMGR1\n# Define a app channel using server connection\nDEFINE CHANNEL(KAFKA.CHANNEL) CHLTYPE(SVRCONN)\n# Set the channel authentication rules to accept connections requiring userid and password\nSET CHLAUTH(KAFKA.CHANNEL) TYPE(BLOCKUSER) USERLIST('nobody')\nSET CHLAUTH('*') TYPE(ADDRESSMAP) ADDRESS('*') USERSRC(NOACCESS)\nSET CHLAUTH(KAFKA.CHANNEL) TYPE(ADDRESSMAP) ADDRESS('*') USERSRC(CHANNEL) CHCKCLNT(REQUIRED)\n# Set identity of the client connections\nALTER AUTHINFO(SYSTEM.DEFAULT.AUTHINFO.IDPWOS) AUTHTYPE(IDPWOS) ADOPTCTX(YES)\n\nREFRESH SECURITY TYPE(CONNAUTH)\n# Define inventory queue\nDEFINE QLOCAL(INVENTORY)\n# Authorize the IBM MQ user ID to connect to and inquire the queue manager\nSET AUTHREC OBJTYPE(QMGR) PRINCIPAL('admin') AUTHADD(CONNECT,INQ)\n# Authorize the IBM MQ user ID to use the queue:\nSET AUTHREC PROFILE(INVENTORY) OBJTYPE(QUEUE) PRINCIPAL('admin') AUTHADD(ALLMQI)\n# done\nEND\n")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"As an alternate you can use the MQ administration console.")),Object(r.b)("p",null,"TBD"),Object(r.b)("h3",null,"Setup Kafka Connect Cluster"),Object(r.b)("p",null,"Connectors can be added to a Kafka Connect environment using OpenShift CLI commands and the source to image customer resource. We will use the Event Streams admin console to setup kafka connect environment which is based on OpenShift operator. The ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"https://ibm.github.io/event-streams/connecting/connectors/"}),"Event Streams product documentation")," presents the deployment process within the admin console, the ",Object(r.b)("inlineCode",{parentName:"p"},"Setup a kafka connect environment")," tile guides developer thru those steps:"),Object(r.b)("p",null," ",Object(r.b)("span",Object(n.a)({parentName:"p"},{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"692px"}}),"\n      ",Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"87.15277777777777%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsSAAALEgHS3X78AAACM0lEQVQ4y5VUy27TQBS1xI5FlEgRKPE2+RlWLFmwBMQnsGHNlyCxS+w2UfsDEaWbdlNalZYktmOTB87DdmKPZw5zx3FIkJqGKx3deXjO3Ln3XGuVSgWmaWK1itHtduE4DmazGYIg2Iv5PMCvSQBvnPnR7wD+LICm61UYkjBlMex+RjidTtWhxWLxIAKJKPyLUCIIFtCqVR2tYxMLBri+ABnnQoL/JwTiJJGEuo6jIwOpJBrOcZAJIXZ8bowxirCqckg2GQ/h+77Mz1xtJvLG3OfYd4EiLJfLijCRk16vD89zVXE8z8NgMIDruiqv+TiKIkUcx7Es5Eo+kyHlUKCxVqvV0G631S29Xk8dtG17g36/v6k+zWnfsqwNIJbbj4ZWr9fRarXWxeAH5W7bzu+AkwuB00vg2paEhUIBjUZDbaYpU6R0cB84gRM5x4tPHM/ecDx5xfHxSwytVCqh2WwqwjBa7hTgMTCW4NZJcPkzwcV9Amu4glYsFnFsNjGNAWuSywGPRpl/t5sTlhEaRhO058+XYEm8fs5hWqRvU9UI6ypnhKZcSOHYlqrmaDRS/UygNiRdUivSnHRKkuFKKmILO4SGuolkQzLJ5UKyIE/ruWxoPh56MrQgj3WNtWyIMC/KoSZ/LOjcCHz7IXB2m/nODXDvJbuEaZruLQRLs2iMc4GnrwX09wKVdwLP3wpoLwU+fP6HkH5L1FoPIQwjrJYR3HGEzlWIr9cS30OcSd+5inDnhPgDN/vfR/nbQg8AAAAASUVORK5CYII=')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(r.b)("img",Object(n.a)({parentName:"span"},{className:"gatsby-resp-image-image",alt:"4",title:"4",src:"/refarch-eda/static/1bb44d11f13930a64b18447c097d8d97/b53e5/es-kconnect.png",srcSet:["/refarch-eda/static/1bb44d11f13930a64b18447c097d8d97/7fc1e/es-kconnect.png 288w","/refarch-eda/static/1bb44d11f13930a64b18447c097d8d97/a5df1/es-kconnect.png 576w","/refarch-eda/static/1bb44d11f13930a64b18447c097d8d97/b53e5/es-kconnect.png 692w"],sizes:"(max-width: 692px) 100vw, 692px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    ")),Object(r.b)("p",null," ",Object(r.b)("span",Object(n.a)({parentName:"p"},{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"803px"}}),"\n      ",Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"95.4861111111111%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsSAAALEgHS3X78AAABmUlEQVQ4y4WUCavCMBCE+///oCCC9333sLVW9/kFpqw19RWGJNvNZPZIkrJqLCtqS69Xy7LMns+n8b1er3bsmzdN84UkzzMrivyNwm63m63Xa5vNZrZarWw0GoU5mEwmNp/PbTqd2ng8tsViEQR0kWRZ3i7yPLf9fm/L5dI2m007Hg4H2+12YQT4HI/H4N9FookIt9ttUIICVELg/3ukafqBoFDOgLAhGQ6HIURIUckBgNB1mGwCqWoV+pAJDRKIpRKwQXYP7D6SXkIcpVDO/yEaMjmkkgqL0AkVG1DVvQ2f0+kU9n8pRD4OIsKRhF/ffdqF9qkg0ZBpCcKlXRhZq1XUNqQl1jZtyN7weDzMf6z78tXFRx/KqaqqQHK/3wPquv7qQ81/EnonQjqfzyE3vxRFr16XDCLyI8KyLNt7HgP/hGhRaJXBYBBuC9AtoI3Ulx50BQUDH0URIe2gKlJRP/qDNUcleb5cLiGiaA4hUG91q9738Y5Gq0zONFJlRgE12Pxj6x/c9qZ4Qjbw8qJMrzBzgTVqusAO4R8FxKsgPeZlrgAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(r.b)("img",Object(n.a)({parentName:"span"},{className:"gatsby-resp-image-image",alt:"5",title:"5",src:"/refarch-eda/static/ba93aa66417a294f6df7f194ec7bf9ce/644bd/es-kconn-setup.png",srcSet:["/refarch-eda/static/ba93aa66417a294f6df7f194ec7bf9ce/7fc1e/es-kconn-setup.png 288w","/refarch-eda/static/ba93aa66417a294f6df7f194ec7bf9ce/a5df1/es-kconn-setup.png 576w","/refarch-eda/static/ba93aa66417a294f6df7f194ec7bf9ce/644bd/es-kconn-setup.png 803w"],sizes:"(max-width: 803px) 100vw, 803px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    ")),Object(r.b)("p",null,"Once you downloaded the zip file, which is a yaml manifest, define the configuration for a KafkaConnectS2I instance. The major configuration settings are the server certificate settings and the authentication using Mutual TLS authentication, something like:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-yaml"}),"spec:\n  bootstrapServers: sandbox-rp-kafka-bootstrap.eventstreams.svc:9093\n  tls:\n    trustedCertificates:\n    - secretName: sandbox-rp-cluster-ca-cert\n      certificate: ca.crt\n  authentication:\n    type: tls\n    certificate: user.crt\n    key: user.key\n    secretName: sandbox-rp-tls-cred\n")),Object(r.b)("p",null,"If you change the name of the connect cluster in the metadata, modify also the name: ",Object(r.b)("inlineCode",{parentName:"p"},"spec.template.pod.metadata.annotations. productChargedContainers")," accordingly."),Object(r.b)("p",null,"The secrets used above, need to be accessible from the project where the connector is deployed. The simple way to do so is to copy the source certificates from the Event streams project to your current project with the commands like:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),"oc get secret  sandbox-rp-cluster-ca-cert  -n eventstreams --export -o yaml | oc apply -f -\noc get secret  sandbox-rp-tls-cred  -n eventstreams --export -o yaml | oc apply -f -\n")),Object(r.b)("p",null,"If you do not have a TLS client certificate from a TLS user, use ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"../../overview/pre-requisites#getting-tls-authentication-from-event-streams-on-openshift"}),"this note")," to create one."),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Deploy the connector cluster")),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),"oc apply -f kafka-connect-s2i.yaml \n")),Object(r.b)("p",null,"An instance of this custom resource represents a Kafka Connect distributed worker cluster. In this mode, workload balancing is automatic, scaling is dynamic, and tasks and data are fault-tolerant. Each connector is represented by another custom resource called KafkaConnector."),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),"oc describe kafkaconnects2i eda-connect-cluster\n")),Object(r.b)("h3",null,"Add the mq-sink connector"),Object(r.b)("p",null,"The ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"https://ibm.github.io/event-streams/connecting/mq/"}),"product documentation")," details the available MQ connectors and the configuration process. Using the event streams console, the process is quite simple to get a connector configuration as json file. Here is an example of the final form to generate the json file:"),Object(r.b)("p",null," ",Object(r.b)("span",Object(n.a)({parentName:"p"},{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"681px"}}),"\n      ",Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"90.625%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsSAAALEgHS3X78AAABjElEQVQ4y52Ua26CQBSF2f86TPzhCoyPqDyqy7AmGGEEYRgQUE4510DTJrXijxMd5vLNuY/BGo1GWK1WmM1mmM/nP36n02m/fibGLBYLkGWt12ucz2fs93v4vi86HA44nU5I0xR5nqOua1RV9afKskTTNGLM2mw2yLJMAJfLBVprxHHc/6cIfqYkSeTg5XL5AN7vdxhjUBSFbBDCQxjcQZ+JcXxXgJ7nycMoisQ6N67X62AxdQE67kfrykApJWA6HSpmQ2gPZEGZKh/S5TvqHXqeK7AgCKS4PG2omFlfQ9u2pSnc6FwOEUEUXQrQdb8dEtp1ugv8T4yleuB4PJYFB7pz+Y564GQykQVvS3cz3tF3lx1HgIRxBLp0h8CYGbvM8klTSD8ej1BhKFeO8CEjw/c5ervdDhYvtM4MwlAhSXU7OqlI6+xlMb6q6gfQdlyopManH8EPUsS6RkSl1ctSSYmsaLDdbmGxkMbk0hQjNSkGi7W/3W4PIL82bIJSYVuL9sPw4vz9nkVeDgK/AAJNTn6C6CPKAAAAAElFTkSuQmCC')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(r.b)("img",Object(n.a)({parentName:"span"},{className:"gatsby-resp-image-image",alt:"6",title:"6",src:"/refarch-eda/static/a6a42bc9cb9e2ebc9badcde679b0bfa4/165d5/es-mq-sink.png",srcSet:["/refarch-eda/static/a6a42bc9cb9e2ebc9badcde679b0bfa4/7fc1e/es-mq-sink.png 288w","/refarch-eda/static/a6a42bc9cb9e2ebc9badcde679b0bfa4/a5df1/es-mq-sink.png 576w","/refarch-eda/static/a6a42bc9cb9e2ebc9badcde679b0bfa4/165d5/es-mq-sink.png 681w"],sizes:"(max-width: 681px) 100vw, 681px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    ")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Once the json is downloaded, complete the settings")),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),'{\n  "name": "mq-sink",\n  "config":\n  {\n      "connector.class": "com.ibm.eventstreams.connect.mqsink.MQSinkConnector",\n      "tasks.max": "1",\n      "topics": "inventory",\n      "key.converter": "org.apache.kafka.connect.storage.StringConverter",\n      "value.converter": "org.apache.kafka.connect.storage.StringConverter",\n      "mq.queue.manager": "EDAQMGR1",\n      "mq.connection.name.list": "eda-mq-lab-ibm-mq(1414)",\n      "mq.user.name": "admin",\n      "mq.password": "passw0rd",\n      "mq.user.authentication.mqcsp": true,\n      "mq.channel.name": "KAFKA.CHANNEL",\n      "mq.queue": "INVENTORY",\n      "mq.message.builder": "com.ibm.eventstreams.connect.mqsink.builders.DefaultMessageBuilder"\n  }\n}\n')),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"To run the connector within the cluster, we need to connector jar. You can download this jar file from the Event Stream adming console ",Object(r.b)("inlineCode",{parentName:"p"},"> Toolkit > Add connector to your Kafka Connect environment > Add Connector > IBM MQ Connectors"),","),Object(r.b)("span",Object(n.a)({parentName:"li"},{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"569px"}}),"\n      ",Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"128.4722222222222%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAYAAAC3g3x9AAAACXBIWXMAAAsSAAALEgHS3X78AAADhklEQVRIx4VVu47kRBTtmISYDyBFItmYBCQSJEAiY8kIyUCkSHwDEgmQkoG0K1aIfQytRYJdEpjp7p3p6W67H3Z3+/0o2/3woU7Z5bGZHY2lM7dcU3XqnL63rntpmsJxHFxcXCiYponlcgnDMBS22y2yLAPX3YY4jtFrE47HY5yfn2MymTTj+XyuSDebjYpcq2MbrusiSRL0+CcMQ1iWhdVqpcCxbVsyrpTaxWLRgBs9z4Pveypq+L5fEVImB/+XH0aJwnVribSWIAgTNdZ7GZVlPdCIohipnLM3AS6nK2WVcxpc77gRpoaF9Xqt5vTeWiFPqcniioz/8INYKTge9gAOHUSxkEQh4iiqFXcI45owUafZ21DaieH50orIkYgSL8wDJqsDRsYetneEyAp5YKLWWXI993YI40ZhgsnCxcaJ4AUZ4rSAud7jx0cFfuoX+OfyAC86Ikl3cHyBtVw3njvKmXbaUlhNMlvaQpFn4BPGmTwgkcqEfCuR5zn0vqv1NWE7KbQchlEnASxqIdI6o6kcZ00RUxnXx9cVytOFaKDLQB/Gdz3fTkAXFalSSNm8cgRvhi0L22X1S7CAWeCz2UwVfPugLlqWKZ3V7rqesjaemHjc/wtP+n/i10dPcXFpSGsBgiDokF1XWWeZdnKZACEt8bn34ATvfXgXH3x0F2+98z5+vv+wSk4U3UjUEPKHprW5OcVibmC5oHUD05mBmWGq2FZ2q8J9HuPZiwRvf5Xj3a9z3PmywLcPEpRFIIu7ttnafKvCTMSYWQm++03gh4cC3/wi0P83QZ7KGxOEsnwi1Y1I3FZ4I6GQSVhaDk6em3jyfIH+3yasxRSGzDgbLLPL/sgxE/cyy+1x71DE+GMg8OYXJV7/rMQbnx+x9VLkmazFumW9rL21a7LTHPjH9QKYK5kYy8PS9rCRHZmNlJ2ZoDLdqfU8442fgO12g9FwgNFIY4TBYIDT01OcnZ1hOByqd44ZCX4ybNtWYMGzbzYKyczbwsKuWrqvFHBOq+O7/n5wbrfbqSahwcQxgc1d5gszqUEyzrHoq8YRdWJRFJKokM1DIt/J/hipRtHTZGzn1cfpygbVkJw/CxWRRCOTqg77XN4fiZKxUIlsrp623VbJg2iVLaz9lGUVLR/4fQg8HQEnA2DlZFeEtz2lZNHYH0rVaL9/XOLVT4547dMjXvm4xP1nAv8BukmlvH/Oy1wAAAAASUVORK5CYII=')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(r.b)("img",Object(n.a)({parentName:"span"},{className:"gatsby-resp-image-image",alt:"es mq sink 1",title:"es mq sink 1",src:"/refarch-eda/static/666a96f7a21958a1b5f1f12c25ba5cf9/bded5/es-mq-sink-1.png",srcSet:["/refarch-eda/static/666a96f7a21958a1b5f1f12c25ba5cf9/7fc1e/es-mq-sink-1.png 288w","/refarch-eda/static/666a96f7a21958a1b5f1f12c25ba5cf9/bded5/es-mq-sink-1.png 569w"],sizes:"(max-width: 569px) 100vw, 569px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    "))),Object(r.b)("p",null,"or as an alternate, we ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/ibm-messaging/kafka-connect-mq-sink.git"}),"cloned the mq-sink code"),", so a ",Object(r.b)("inlineCode",{parentName:"p"},"mvn package")," command under ",Object(r.b)("inlineCode",{parentName:"p"},"kafka-connect-mq-sink")," folder will build the jar. Copy this jar under ",Object(r.b)("inlineCode",{parentName:"p"},"cp4i/my-plugins")," folder. "),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Build the connector with source to image component.")),Object(r.b)("p",null,"With the correct credentials for IBM EventStreams and IBM MQ, Kafka Connect should connect to both services and pull data from the EventStreams topic configured to the MQ Queue configured.  You will see signs of success in the container output (via oc logs, or in the UI):"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),'+ curl -X POST -H Content-Type: application/json http://localhost:8083/connectors --data @/opt/kafka-connect-mq-sink/config/mq-sink.json\n...\n{"name":"mq-sink-connector","config":{"connector.class":"com.ibm.eventstreams.connect.mqsink.MQSinkConnector","tasks.max":"1","topics":"inventory","key.converter":"org.apache.kafka.connect.storage.StringConverter","value.converter":"org.apache.kafka.connect.storage.StringConverter","mq.queue.manager":"QM1","mq.connection.name.list":"mq-service(1414)","mq.user.name":"admin","mq.password":"passw0rd","mq.user.authentication.mqcsp":"true","mq.channel.name":"KAFKA.CHANNEL","mq.queue":"INVENTORY","mq.message.builder":"com.ibm.eventstreams.connect.mqsink.builders.DefaultMessageBuilder","name":"mq-sink-connector"},"tasks":[{"connector":"mq-sink-connector","task":0}],"type":"sink"}\n...\n[2020-06-23 04:26:26,054] INFO Creating task mq-sink-connector-0 (org.apache.kafka.connect.runtime.Worker:419)\n...[2020-06-23 04:26:26,449] INFO Connection to MQ established (com.ibm.eventstreams.connect.mqsink.JMSWriter:229)\n[2020-06-23 04:26:26,449] INFO WorkerSinkTask{id=mq-sink-connector-0} Sink task finished initialization and start (org.apache.kafka.connect.runtime.WorkerSinkTask:306)\n')),Object(r.b)("p",null,"You should now have the Kafka Connector MQ Sink running on OpenShift."),Object(r.b)("h2",null,"MQ Sink Connector on virtual or baremetal server, MQ and Event Streams on IBM Cloud"),Object(r.b)("p",null,"In this second option, we are using our own laptop for the baremetal dedployment, but the current solution will work the same on virtual server."),Object(r.b)("p",null," ",Object(r.b)("span",Object(n.a)({parentName:"p"},{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}}),"\n      ",Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"60.06944444444444%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACIElEQVQoz2VSy24TQRDcf+LELyA+gQNC4gxHuCL4AnLlwAWJExJSDiQHFIGEhZEBEYSTYGInsWPY9Xq9j3nPFjX7ACNWKnVPd09tdU9H4FfXdTDwNNZ6KO1gTIBt4JkIJSHflrbn/t72F/XBvFAQpYAWFbyWKHIJ50LOE4Zwnf8vWbDbxFHvz+MKg4nAwbHC7qHEeF4gyx2+n1vC4ORM42iqGNMt6VZnqGv0buS9h3UWk2WF0ZnFpwWwP+Y5lnj5psLVmwtcu7PE9btLXLmxwNuPVaO2Vf9/25ExGo7BlH/2mqqSRdeaxouDCrcexLi/k+Le4xS3H8YYHekmX0kDY91W238ITeP8WmtMZwlGn79hdrFCXqqG8NGTNZ69KvF0t8DO8w2+/GjrpQUyYWD99iOR0JoQdEgLIEmACwqcE1kOnF46vB4K7L2X2B9K7A0EVpnr5kaViio7whYkDI7mauSCK6ItqspAK4uSZ6H7l/WcWms9562Yt6yVhndt4K4507b1KLCG+QomlSJCEVHRL2QNIaiESIvWSsaUZpyjzBUh2T59Y1rSRqEnM4Vhnnp8OKkxPK4xSzwKXlxtPA4nGqOxou8gpMem4jZMDd59tRhwI05j07TcEf4dalYYXCYFFsS6kE0sKE5Jes55/gw/KUMHDklWEQIx7aaUTbsNoTX9PnWybQtLhAWwnBE3C9kaWBObvI25ABLwPRs/1Ibd/A23xJfhP80yrAAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(r.b)("img",Object(n.a)({parentName:"span"},{className:"gatsby-resp-image-image",alt:"2",title:"2",src:"/refarch-eda/static/9aeea9730df667cad9efd461136a4d76/3cbba/hybrid.png",srcSet:["/refarch-eda/static/9aeea9730df667cad9efd461136a4d76/7fc1e/hybrid.png 288w","/refarch-eda/static/9aeea9730df667cad9efd461136a4d76/a5df1/hybrid.png 576w","/refarch-eda/static/9aeea9730df667cad9efd461136a4d76/3cbba/hybrid.png 1152w","/refarch-eda/static/9aeea9730df667cad9efd461136a4d76/41dda/hybrid.png 1222w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    ")),Object(r.b)("h3",null,"Pre-requisites"),Object(r.b)("p",null,"We assume that you have an instance of IBM Event Streams already running on IBM Cloud or on OpenShift with at least administrator credentials created. The credentials will be needed later on for configuring the Kafka Connect framework to be able to connect and work with your IBM Event Streams instance. Also, this scenario requires a topic called ",Object(r.b)("inlineCode",{parentName:"p"},"inventory")," in your IBM Event Streams instance. For gathering the credentials and creating the topic required for this scenario, please review the ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"/refarch-eda/use-cases/overview/pre-requisites/"}),"Common pre-requisites"),". ",Object(r.b)("strong",{parentName:"p"},"IMPORTANT:")," if you are sharing your IBM Event Streams instance, append some unique identifier to the topic you create in IBM Event Streams."),Object(r.b)("h3",null,"Create Local IBM MQ Instance"),Object(r.b)("p",null,"In this section we are going to use Docker to create a local IBM MQ instance to simulate an IBM MQ instance somewhere in our datacenter."),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Create a data directory to mount onto the container."),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),"mkdir qm1data\n"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Run the IBM MQ official Docker image by execting the following command."),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),"docker run                     \\\n  --name mq                    \\\n  --detach                     \\\n  --publish 1414:1414          \\\n  --publish 9443:9443          \\\n  --publish 9157:9157          \\\n  --volume qm1data:/mnt/mqm    \\\n  --env LICENSE=accept         \\\n  --env MQ_QMGR_NAME=QM1       \\\n  --env MQ_APP_PASSWORD=admin  \\\n  --env MQ_ENABLE_METRICS=true \\\n  ibmcom/mq\n")),Object(r.b)("p",{parentName:"li"},"where we can see that out container will be called ",Object(r.b)("inlineCode",{parentName:"p"},"mq"),", it will run in ",Object(r.b)("inlineCode",{parentName:"p"},"detached")," mode (i.e. in the background), it will expose the ports IBM MQ uses for communication and the image we are actually running ",Object(r.b)("inlineCode",{parentName:"p"},"ibmcom/mq"),".")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"You could make sure your IBM MQ Docker image is running by listing the Docker containers in your workstation."),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),'$ docker ps\nCONTAINER ID   IMAGE       COMMAND            CREATED         STATUS         PORTS                                                                    NAMES\na7b2a115a3c6   ibmcom/mq   "runmqdevserver"   6 minutes ago   Up 6 minutes   0.0.0.0:1414->1414/tcp, 0.0.0.0:9157->9157/tcp, 0.0.0.0:9443->9443/tcp   mq\n'))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"You should also be able to log into the MQ server on port 9443 (",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"https://localhost:9443"}),"https://localhost:9443"),") with default user ",Object(r.b)("inlineCode",{parentName:"p"},"admin")," and password ",Object(r.b)("inlineCode",{parentName:"p"},"passw0rd"),"."),Object(r.b)("span",Object(n.a)({parentName:"li"},{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}}),"\n      ",Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"71.875%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAABlklEQVQ4y31U206DQBDt5/lnGp/9EfXF+A8+aKKxttK0RVC6dIG9cSl7nKWBAr1McjK7hD175szAxJgcmiCSBDwIwKMNfsJfBISIMbDtFhsWI95yKGOgtIFUGlI7GAipIKWG588RpwwTKSXOoSgKuLDWdvkU+jERQmAMR5Zl2YDwElH/WadwTOjyWOE4Tl1CCt3hPuF+31fogpGfYRg28DwP0+n0yIqmZK0EjHaqFJQiSEF5rzrP847QXeAuLMsShpqjqSnj8huFq0hj+mMQsz8E1OU4K8BijihiqOhw+6IjkXShI2rR2lVV1YHQW0d4nW/BeQLf9zELNJZhguVq3ahpX1Q0KtoU2O1qwm6AgcLF9xc+5j54lhOJD5lxvK8LfM4WZIU6NKWidS1gS3U0XgOFrgF7z0RXRkZecc7Jw7YpFrcPFlfXNe6e6mZf1/a0h/sRGXZ6PDaO4PHF4ube4vmtPXw8QqPBlh3Z6Tk8oD4z6D2F4siXMSFVCOpHky/FpF/iJUK3T+gH0n6WaZo22T1r124q/gHUKj1j/sf/iQAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(r.b)("img",Object(n.a)({parentName:"span"},{className:"gatsby-resp-image-image",alt:"login",title:"login",src:"/refarch-eda/static/3f4b605444444f98a911e568765fcf8c/3cbba/login.png",srcSet:["/refarch-eda/static/3f4b605444444f98a911e568765fcf8c/7fc1e/login.png 288w","/refarch-eda/static/3f4b605444444f98a911e568765fcf8c/a5df1/login.png 576w","/refarch-eda/static/3f4b605444444f98a911e568765fcf8c/3cbba/login.png 1152w","/refarch-eda/static/3f4b605444444f98a911e568765fcf8c/0b124/login.png 1728w","/refarch-eda/static/3f4b605444444f98a911e568765fcf8c/84ddc/login.png 1850w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    "))),Object(r.b)("p",null,"Now, we need to configure our local IBM MQ instance Queue Manager in order to define a server connection (",Object(r.b)("inlineCode",{parentName:"p"},"KAFKA.CHANNEL"),") with authentication (user ",Object(r.b)("inlineCode",{parentName:"p"},"admin"),", password ",Object(r.b)("inlineCode",{parentName:"p"},"admin"),") and the queue (",Object(r.b)("inlineCode",{parentName:"p"},"INVENTORY"),") where our messages from Kafka will be sinked to. And we are going to so it using the IBM MQ CLI."),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Get into the IBM MQ Docker container we have started above by executing the following command that will give us a ",Object(r.b)("inlineCode",{parentName:"p"},"bash")," interactive terminal:"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),"docker exec -ti mq bash\n"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Now that we are in the container, start the queue manager ",Object(r.b)("inlineCode",{parentName:"p"},"QM1")," by executing:"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),"strmqm QM1\n"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Start the ",Object(r.b)("inlineCode",{parentName:"p"},"runmqsc")," tool to configure the queue manager by executing:"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),"runmqsc QM1\n"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Create a server-connection channel called ",Object(r.b)("inlineCode",{parentName:"p"},"KAFKA.CHANNEL")," by executing:"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),"DEFINE CHANNEL(KAFKA.CHANNEL) CHLTYPE(SVRCONN)\n"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Set the channel authentication rules to accept connections requiring userid and password by executing:"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),"SET CHLAUTH(KAFKA.CHANNEL) TYPE(BLOCKUSER) USERLIST('nobody')\nSET CHLAUTH('*') TYPE(ADDRESSMAP) ADDRESS('*') USERSRC(NOACCESS)\nSET CHLAUTH(KAFKA.CHANNEL) TYPE(ADDRESSMAP) ADDRESS('*') USERSRC(CHANNEL) CHCKCLNT(REQUIRED)\n"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Set the identity of the client connections based on the supplied context, the user ID by executing:"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),"ALTER AUTHINFO(SYSTEM.DEFAULT.AUTHINFO.IDPWOS) AUTHTYPE(IDPWOS) ADOPTCTX(YES)\n"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Refresh the connection authentication information by executing:"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),"REFRESH SECURITY TYPE(CONNAUTH)\n"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Create the ",Object(r.b)("inlineCode",{parentName:"p"},"INVENTORY")," queue for the connector to use by executing:"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),"DEFINE QLOCAL(INVENTORY)\n"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Authorize ",Object(r.b)("inlineCode",{parentName:"p"},"admin")," to connect to and inquire the queue manager by executing:"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),"SET AUTHREC OBJTYPE(QMGR) PRINCIPAL('admin') AUTHADD(CONNECT,INQ)\n"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Finally authorize ",Object(r.b)("inlineCode",{parentName:"p"},"admin")," to use the queue by executing:"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),"SET AUTHREC PROFILE(INVENTORY) OBJTYPE(QUEUE) PRINCIPAL('admin') AUTHADD(ALLMQI)\n"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"End ",Object(r.b)("inlineCode",{parentName:"p"},"runmqsc")," by executing:"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),"END\n")))),Object(r.b)("p",null,"You should see the following output:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),"9 MQSC commands read.\nNo commands have a syntax error.\nOne valid MQSC command could not be processed.\n")),Object(r.b)("p",null,"Exit the container by executing:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),"exit\n")),Object(r.b)("p",null,"If you check your IBM MQ dashboard you should see your newly created ",Object(r.b)("inlineCode",{parentName:"p"},"INVENTORY")," queue:"),Object(r.b)("p",null,"  ",Object(r.b)("span",Object(n.a)({parentName:"p"},{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}}),"\n      ",Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"73.95833333333334%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAACfUlEQVQ4y31T227TQBDNN6RK2vQhF1FCRPkV4KVRC7Tfg8RfwCMSHwFfQGlpCnFoVTVOYsfxJevbru3DzDYONEWMdDT27syZ61aazSZ2dnawtbWF7e1tPH/xEkdHr3B4eEj6aI1+v4+DgwOtN8Hnx29e4+TkGJXuk6fodrto7O7i2f4+vp1dwLIduO4C8/kctm1rnWUZ/iexAiSZVB7tdfF4bw+NRgO9Xg/n3wdw/YgQEqmLMAyxXC4RBAGklIjjGFEUQSmlgzCUypASmyRdqddqutRqtYpWq4WLwSUZ5MgLIMtzCCGQJIl2lETC5I7jIKc7tfpnCEEgXakRYb1e1z3sdDq4HAwQ0EVEGeWUnb8iKChAnkXkHMA0TZ0lBxEiXJEKjQqTlYStdhuGMaTyPPieSylm5BjCtiykSQwUGbVAYG5bCHyPAiiEq8yC4A73CDudNk7Pf2LuS1iLALYrYC+WMC0Xs0UIL8ywCBK4QQx3mazhCWqJignRH8KqJmzh67mBiZNgPHU0kSZzBCxfYeal5KyIWGr4oSJIff7+S4EPn9Vmhh2cnZ3CsWdU1oxKnelyJ9Sz6WSM2dTE9dUVptMJzPEtRoaB8e0Nrm9MvP1o492nxX3CNvVwcPkDjk8ZWjQMKjmiwXieD5+GxM3nVeKBuK6nh8VD4T6jEDS1jR62aW2M0RWSHAiiQi8qC0+T14Sl1LyTvDal8JpJWrcHhEPjFyIJvaRFkROKtbPeRfpm4d1k8D0HYc02/yZUd9HY6O9s2HGTkIXtGBxwo4dEOByBtoCM0/VrYJKy7LJMPkvTdB2kvHswlOFwqMn4yUmZ6gGwIxtvoiTl915+/waGWsuY4TUFTwAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(r.b)("img",Object(n.a)({parentName:"span"},{className:"gatsby-resp-image-image",alt:"inventory",title:"inventory",src:"/refarch-eda/static/5058d20dcb35a9563157f902d6cca5da/3cbba/inventory_queue.png",srcSet:["/refarch-eda/static/5058d20dcb35a9563157f902d6cca5da/7fc1e/inventory_queue.png 288w","/refarch-eda/static/5058d20dcb35a9563157f902d6cca5da/a5df1/inventory_queue.png 576w","/refarch-eda/static/5058d20dcb35a9563157f902d6cca5da/3cbba/inventory_queue.png 1152w","/refarch-eda/static/5058d20dcb35a9563157f902d6cca5da/0b124/inventory_queue.png 1728w","/refarch-eda/static/5058d20dcb35a9563157f902d6cca5da/4ea69/inventory_queue.png 2304w","/refarch-eda/static/5058d20dcb35a9563157f902d6cca5da/e60a9/inventory_queue.png 2540w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    ")),Object(r.b)("h3",null,"Create MQ Kafka Connector Sink"),Object(r.b)("p",null,"The MQ Connector Sink can be downloaded from this ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/ibm-messaging/kafka-connect-mq-sink"}),"Github"),". The Github site includes exhaustive instructions for further detail on this connector and its usage."),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Clone the repository with the following command:"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),"git clone https://github.com/ibm-messaging/kafka-connect-mq-sink.git\n"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Change directory into the ",Object(r.b)("inlineCode",{parentName:"p"},"kafka-connect-mq-sink")," directory:"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),"cd kafka-connect-mq-sink\n"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Build the connector using Maven:"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),"mvn clean package\n"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Create a directory (if it does not exist yet) to contain the Kafka Connect framework configuration and cd into it."),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),"mkdir config\ncd config\n"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Create a configuration file called ",Object(r.b)("inlineCode",{parentName:"p"},"connect-distributed.properties")," for the Kafka Connect framework with the following properties in it:"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-properties"}),'# A list of host/port pairs to use for establishing the initial connection to the Kafka cluster.\nbootstrap.servers=REPLACE_WITH_YOUR_BOOTSTRAP_URL\nssl.enabled.protocols=TLSv1.2\nssl.protocol=TLS\nssl.truststore.location=/opt/kafka/config/es-cert.p12\nssl.truststore.password=REPLACE_WITH_YOUR_PKCS12_CERTIFICATE_PASSWORD\nssl.truststore.type=PKCS12\nsecurity.protocol=SASL_SSL\nsasl.mechanism=SCRAM-SHA-512\nsasl.jaas.config=org.apache.kafka.common.security.scram.ScramLoginModule required username="REPLACE_WITH_YOUR_SCRAM_USERNAME" password="REPLACE_WITH_YOUR_SCRAM_PASSWORD";\n\n# Consumer side configuration\nconsumer.bootstrap.servers=REPLACE_WITH_YOUR_BOOTSTRAP_URL\nconsumer.security.protocol=SASL_SSL\nconsumer.ssl.protocol=TLSv1.2\nconsumer.ssl.truststore.location=/opt/kafka/config/es-cert.p12\nconsumer.ssl.truststore.password=REPLACE_WITH_YOUR_PKCS12_CERTIFICATE_PASSWORD\nconsumer.ssl.truststore.type=PKCS12\nconsumer.sasl.mechanism=SCRAM-SHA-512\nconsumer.sasl.jaas.config=org.apache.kafka.common.security.scram.ScramLoginModule required username="REPLACE_WITH_YOUR_SCRAM_USERNAME" password="REPLACE_WITH_YOUR_SCRAM_PASSWORD";\n\n# Producer Side\nproducer.bootstrap.servers=REPLACE_WITH_YOUR_BOOTSTRAP_URL\nproducer.security.protocol=SASL_SSL\nproducer.ssl.protocol=TLSv1.2\nproducer.ssl.truststore.location=/opt/kafka/config/es-cert.p12\nproducer.ssl.truststore.password=REPLACE_WITH_YOUR_PKCS12_CERTIFICATE_PASSWORD\nproducer.ssl.truststore.type=PKCS12\nproducer.sasl.mechanism=SCRAM-SHA-512\nproducer.sasl.jaas.config=org.apache.kafka.common.security.scram.ScramLoginModule required username="REPLACE_WITH_YOUR_SCRAM_USERNAME" password="REPLACE_WITH_YOUR_SCRAM_PASSWORD";\n\nplugin.path=/opt/kafka/libs\n\n# unique name for the cluster, used in forming the Connect cluster group. Note that this must not conflict with consumer group IDs\ngroup.id=mq-sink-cluster-REPLACE_WITH_UNIQUE_IDENTIFIER\n\n# The converters specify the format of data in Kafka and how to translate it into Connect data. Every Connect user will\n# need to configure these based on the format they want their data in when loaded from or stored into Kafka\nkey.converter=org.apache.kafka.connect.json.JsonConverter\nvalue.converter=org.apache.kafka.connect.json.JsonConverter\n# Converter-specific settings can be passed in by prefixing the Converter\'s setting with the converter we want to apply\n# it to\nkey.converter.schemas.enable=true\nvalue.converter.schemas.enable=true\n\n# Topic to use for storing offsets.\noffset.storage.topic=connect-offsets-REPLACE_WITH_UNIQUE_IDENTIFIER\noffset.storage.replication.factor=3\n#offset.storage.partitions=25\n\n# Topic to use for storing connector and task configurations; note that this should be a single partition, highly replicated, and compacted topic.\nconfig.storage.topic=connect-configs-REPLACE_WITH_UNIQUE_IDENTIFIER\nconfig.storage.replication.factor=3\n\n# Topic to use for storing statuses. This topic can have multiple partitions and should be replicated and compacted.\nstatus.storage.topic=connect-status-REPLACE_WITH_UNIQUE_IDENTIFIER\nstatus.storage.replication.factor=3\nstatus.storage.partitions=5\n\n# Flush much faster than normal, which is useful for testing/debugging\noffset.flush.interval.ms=10000\n')),Object(r.b)("p",{parentName:"li"},Object(r.b)("strong",{parentName:"p"},"IMPORTANT:")," You must replace ",Object(r.b)("strong",{parentName:"p"},"all occurences")," of the following placeholders in the properties file above with the appropriate values for the Kafka Connect framework to work with your IBM Event Streams instance:"),Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"REPLACE_WITH_YOUR_BOOTSTRAP_URL"),": Your IBM Event Streams bootstrap url."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"REPLACE_WITH_YOUR_PKCS12_CERTIFICATE_PASSWORD"),": Your PCKS12 TLS certificate password."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"REPLACE_WITH_YOUR_SCRAM_USERNAME"),": Your SCRAM service credentials username."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"REPLACE_WITH_YOUR_SCRAM_PASSWORD"),": Your SCRAM service credentials password."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"REPLACE_WITH_UNIQUE_IDENTIFIER"),": A unique identifier so that the resources your kafka connect cluster will create on your IBM Event Streams instance don’t collide with other users’ resources ",Object(r.b)("em",{parentName:"li"},"(Note: there are 4 placeholders of this type. Replace them all).")," ")),Object(r.b)("p",{parentName:"li"},"Review the ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"/refarch-eda/use-cases/overview/pre-requisites/"}),"Common pre-requisites")," instructions if you don’t know how to find out any of the config properties above. ")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Download the IBM Event Streams TLS certificate so that your Kafka Connect framework local instance can establish secure communication with your IBM Event Streams instance. ",Object(r.b)("strong",{parentName:"p"},"IMPORTANT:")," download the PKCS12 certificate. How to get the certificate in the ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"/refarch-eda/use-cases/overview/pre-requisites/"}),"Common pre-requisites")," section. ")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Create a log4j configuration file named ",Object(r.b)("inlineCode",{parentName:"p"},"connect-log4j.properties")," based on the template below."),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-properties"}),"log4j.rootLogger=DEBUG, stdout\n\nlog4j.appender.stdout=org.apache.log4j.ConsoleAppender\nlog4j.appender.stdout.layout=org.apache.log4j.PatternLayout\nlog4j.appender.stdout.layout.ConversionPattern=[%d] %p %m (%c:%L)%n\n\nlog4j.logger.org.apache.kafka=INFO\n"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Back out of the ",Object(r.b)("inlineCode",{parentName:"p"},"config")," directory to the ",Object(r.b)("inlineCode",{parentName:"p"},"kafka-connect-mq-sink")," directory:"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),"cd ..\n"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Build the Docker image for your Kafka Connect framework that will contain the IBM MQ Sink connector and all the properties files you have created and tailored earlier so that your Kafka Connect framework can work with your IBM Event Streams instance we have set up previously in this exercise (",Object(r.b)("em",{parentName:"p"},"mind the dot at the end of the command. It is necessary"),"):"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),"docker build -t kafkaconnect-with-mq-sink:1.3.0 .\n"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Run the Kafka Connect MQ Sink container."),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(n.a)({parentName:"pre"},{}),"docker run                                 \\\n  --name mq-sink                           \\\n  --detach                                 \\\n  --volume $(pwd)/config:/opt/kafka/config \\\n  --publish 8083:8083                      \\\n  --link mq:mq                             \\\n  kafkaconnect-with-mq-sink:1.3.0\n"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Now that we have a Kafka Connect framework running with the configuration to connect to our IBM Event Streams instance and the IBM MQ Sink Connector jar file in it, is to create a JSON file called ",Object(r.b)("inlineCode",{parentName:"p"},"mq-sink.json")," to startup an instance of the IBM MQ Sink connector in our Kafka Connect framework with the appropriate config to work read messages from the IBM Event Streams topic we desire and sink those to the IBM MQ instance we have running locally. ",Object(r.b)("strong",{parentName:"p"},"IMPORTANT:")," If you are sharing your IBM Event Streams instance and followed the instructions on this readme, you should have appended a unique identifier to the name of the topic (",Object(r.b)("inlineCode",{parentName:"p"},"inventory"),") that you are meant to create in IBM Event Streams. As a result, modify the line ",Object(r.b)("inlineCode",{parentName:"p"},'"topics": "inventory"')," in the following JSON object accordignly."),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),'{\n   "name": "mq-sink",\n   "config":\n   {\n       "connector.class": "com.ibm.eventstreams.connect.mqsink.MQSinkConnector",\n       "tasks.max": "1",\n       "topics": "inventory",\n\n       "key.converter": "org.apache.kafka.connect.storage.StringConverter",\n       "value.converter": "org.apache.kafka.connect.storage.StringConverter",\n\n       "mq.queue.manager": "QM1",\n       "mq.connection.name.list": "mq(1414)",\n       "mq.user.name": "admin",\n       "mq.password": "passw0rd",\n       "mq.user.authentication.mqcsp": true,\n       "mq.channel.name": "KAFKA.CHANNEL",\n       "mq.queue": "INVENTORY",\n       "mq.message.builder": "com.ibm.eventstreams.connect.mqsink.builders.DefaultMessageBuilder"\n   }\n}\n'))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Last piece of the puzzle is to tell our Kafka Connect framework to create and startup the IBM MQ Sink connector based on the configuration we have in the previous json file. To do so, execute the following ",Object(r.b)("inlineCode",{parentName:"p"},"POST")," request."),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-Shell"}),'curl -X POST -H "Content-Type: application/json" http://localhost:8083/connectors   --data "@./mq-sink.json"\n\n# The response returns the metadata about the connector\n{"name":"mq-sink","config":{"connector.class":"com.ibm.eventstreams.connect.mqsink.MQSinkConnector","tasks.max":"1","topics":"inventory","key.converter":"org.apache.kafka.connect.storage.StringConverter","value.converter":"org.apache.kafka.connect.storage.StringConverter","mq.queue.manager":"QM1","mq.connection.name.list":"ibmmq(1414)","mq.user.name":"admin","mq.password":"passw0rd","mq.user.authentication.mqcsp":"true","mq.channel.name":"KAFKA.CHANNEL","mq.queue":"INVENTORY","mq.message.builder":"com.ibm.eventstreams.connect.mqsink.builders.DefaultMessageBuilder","name":"mq-sink"},"tasks":[{"connector":"mq-sink","task":0}],"type":"sink"}\n'))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"You can query your Kafka Connect framework to make sure of this. Execute the following command that should return all the connectors up and running in your Kafka Connect cluster."),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),'curl localhost:8083/connectors\n["mq-sink"]\n')))),Object(r.b)("p",null,"You should now have a working MQ Sink connector getting messages from your topic in IBM Event Streams and sending these to your local IBM MQ instance. In order to check that out working, we first need to send few messages to that IBM Event Streams topic and then check out our ",Object(r.b)("inlineCode",{parentName:"p"},"INVENTORY")," queue in our local IBM MQ instance."),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"In order to send messages to IBM Event Streams, we are going to use the IBM Event Streams Starter application. You can find the instruction either in the IBM Event Streams official documentation ","[here]"," or on the IBM Event Streams dashboard:"),Object(r.b)("span",Object(n.a)({parentName:"li"},{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}}),"\n      ",Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"87.5%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsSAAALEgHS3X78AAAC00lEQVQ4y4VUy1ITURCdr5HfSAIEChCwio1/5NalW1f+gButYiVVli6kUKOhJIFJJswkmck87jzzON7TmRuQjbeq66Z7uk+ffuRaz7a2cHx8jNPTU7kPDw9xdnaGk5MTHB0dib6zs/NfOTg4EF/r+YuXCIIpPG+MJElEZrMZoihCHMcitEX17zhe+2RZJrexGV9rb39fgjudDrrdLmzbRq/XE3EcB0opkXmZ6ztFliaY+BG6f+xNsiJLNn7W3l4bYRii3+/j+voak8lEEpAl7Uol8Gchzj//hnvvIIxT+EEIZ9DHaKowGkf43ie7SMCt3d1dASiKAnmeI03TTTYKdW88xqcvV3C8EG8vFnj1fokre66TT/H18hcuLu8wDWZrhu12WwCpmBIeC/tTZAo3Tox3H7u4GSm8/lDizXmJYDrGj58dhLoa4281m00BJJPkETOVrPuSyJ3g3vPx7aqDXIW6j7H+HouPqSg2gI1GQyaoOKVQZ9J9S6JQwB9YxjpQoarKeqJPq3iozGq0tqGGNorhLUpvhGp8j2pkIx+7KKoKVVmi1JJluVRSaRv1QgvZcX1oo3AGVmN7G6meWDoLUM3nWEIfzSTXoGlRYrlYQEw6wHVdAVvUNm4Bhfpcx9JHANXgFu7AluVerlbQS4dcr0iky841Ax4GkRHLYyAPN8P0kDeTScnp8A6KfdPBKi9QZalmOICvs5t9pDNLMkKdwASiEJyyZnjXQ3b7B6ljC9DKHaJwHcS143K5lJLIjj0jW9oInNTbYPqop9xEoh0j39el6lIWc9YnNgaYQ0Ay5VmxLfqYdTOnBmxIhihePwCr+mOW55sHwjCibiZtAD3Pk3gmYVIBZBYpSzsymB/N5Cj8bcTY6FPWq2N8NoDMwHKCIICvS2efKNTNU8Zg48ObwfQR1nG0GZLVarXqf8K/j8LTB+Lxd1noNEOYRBhNXASahBnOXzwXGO8Yb0OgAAAAAElFTkSuQmCC')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(r.b)("img",Object(n.a)({parentName:"span"},{className:"gatsby-resp-image-image",alt:"starter",title:"starter",src:"/refarch-eda/static/17abb677ea4ae631c39b775d5bbdc7c7/3cbba/starter-app.png",srcSet:["/refarch-eda/static/17abb677ea4ae631c39b775d5bbdc7c7/7fc1e/starter-app.png 288w","/refarch-eda/static/17abb677ea4ae631c39b775d5bbdc7c7/a5df1/starter-app.png 576w","/refarch-eda/static/17abb677ea4ae631c39b775d5bbdc7c7/3cbba/starter-app.png 1152w","/refarch-eda/static/17abb677ea4ae631c39b775d5bbdc7c7/0b124/starter-app.png 1728w","/refarch-eda/static/17abb677ea4ae631c39b775d5bbdc7c7/4ea69/starter-app.png 2304w","/refarch-eda/static/17abb677ea4ae631c39b775d5bbdc7c7/120ba/starter-app.png 2356w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    ")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Follow the instructions to run the IBM Event Streams starter application from your workstation. ",Object(r.b)("strong",{parentName:"p"},"IMPORTANT:")," When generating the properties for your IBM Event Streams starter application, please choose to connect to an existing topic and select the topic you created previously as part of this exercise so that the messages we send into IBM Event Streams end up in the appropriate topic that is being monitored by your IBM MQ Sink connector runnning on the Kafka Connect framework."),Object(r.b)("span",Object(n.a)({parentName:"li"},{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}}),"\n      ",Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"86.45833333333334%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsSAAALEgHS3X78AAAC10lEQVQ4y4VUS0sbURjNT3IjJO6kuCj4gGIoxYIgYq1SC2le80zmlZlE2nUXXRa676qU/gDbikSpncS2xjxMoxFjoqZJanJ6782DxGnphcN3Mwkn5/vOd8bl9njgmZiAh1YCt9uNycnJwefx8XGMjY0xTE1NYW5uDjMzM5idnWWYnp5mz+bn5+H1euEyYiZUTYeiKNA0DaZpjsCyLCQSCRiGgVQqBXoajQaazSZarRb6p9PpoN1uE0JDZz/uQxRFhEIh8DzP7hzHQRAEBAIBbG1toVgsIpPJIJfLoVQqYfhQUpeu6xiGIBDCMEcIBULGIxwOM3K/349kMslU1Wo1ppCp7FWqmt5dVBUl6teozENXROiqhISpImZoZBTkeTSKnZ0dVKtVpuzk5ASn5TLKZ2c4r1TQIGS/b26chEtPFDxYUbCwSuqqCj+nQNcUSJKMz9vbjOC03CUpkfbzR1kUCwVy/4n65dUwoQ5NN7D4xIL3kYX7qxbuLZvw8zHETQNRYtqXvT206tdoXl+xmb1//QbB5TVwjzew/nAJb1++ciqMaTI2LRXPEzpebBqwzK5ZKvlu98M7XB5+w1X+CM3SMeo/0qh93SPYxcX+LurJj05Casgzf5BUHoIoEacl0q4Ejhhjb39C57KKX+dnaF1UUDz8joy9j2zaxlHKxnn20EkoCcRVLkBqCAIfZitEnfb5fLDT6e569NbklMwzm8sjXzhGLl9AhbjvINwIKFjzKVj3GwiJ3dnqZLaRSATpHmGbuEl37m/HYcr8Shx3FxO4sxDH0lOSkngMMZIYmqSDg4MuIUnEcDpoHUrKqEJZJAnhQ6RyEAWOtMuxxaZJsW3bQdjHICm3CSORKNs5SZZZleUuaPwGLfcIhyP3T0KaCDovCtomhaqqLNf9l8Nwm/9V2CektZ9v+t2IKbcUjrwcHDMk7VE1dPdomxT0HgwGBzO86bl8G/SP/gBTcfqBTVpHjQAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(r.b)("img",Object(n.a)({parentName:"span"},{className:"gatsby-resp-image-image",alt:"starter-config",title:"starter-config",src:"/refarch-eda/static/a899f2f9c6b98c10275617de473c39ad/3cbba/starter-config.png",srcSet:["/refarch-eda/static/a899f2f9c6b98c10275617de473c39ad/7fc1e/starter-config.png 288w","/refarch-eda/static/a899f2f9c6b98c10275617de473c39ad/a5df1/starter-config.png 576w","/refarch-eda/static/a899f2f9c6b98c10275617de473c39ad/3cbba/starter-config.png 1152w","/refarch-eda/static/a899f2f9c6b98c10275617de473c39ad/0b124/starter-config.png 1728w","/refarch-eda/static/a899f2f9c6b98c10275617de473c39ad/4ea69/starter-config.png 2304w","/refarch-eda/static/a899f2f9c6b98c10275617de473c39ad/1566f/starter-config.png 2382w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    ")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Once you have your application running, open it up in your web browser, click on ",Object(r.b)("inlineCode",{parentName:"p"},"Start producing"),", let the application produce a couple of messages and then click on ",Object(r.b)("inlineCode",{parentName:"p"},"Stop producing")),Object(r.b)("span",Object(n.a)({parentName:"li"},{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}}),"\n      ",Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"62.15277777777778%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAABvklEQVQoz5WT3U7CQBCFeQXoD+2CQNvd1lJ+AoiGAL2QIHIlxnDry/gQxjuvfM3jzJYtRRMTL06abme/mTMzrbmuC7fZhGVZsG0bjuNcyJxFUQSlFKSU+lmVOQuCADXP9yGTazDYABhe1b+ATapuNpthPp9jMBjoi0KIUj4l5GQG+BPyC8jB/X4fWZZhMplgPB6XAXEcIwxDcFIGsvi9Wq3RBbDb7eqgdruNRqNRkYXGyXKSJDrZdDotnWjoSUrFZ8u73U7bvhiMTSC7rmURnEHH4xGLxUI7Ku3LEDIK9LOsMM9zHcQwz/PIIk3ev4IjJCmC5XgYjUbY7/cYDof6YmGZdE0tSmekKYIwQk3biRMdmPUzspYiVR10bl7hP37Cuf+AHa4QdlvUmt7JakwVSQ0MNm8Inr7QenhHT2ZUIVme391qIGflpnOTw0ihKTqwXQHHLYbC52Y45UDilNYugyIFdLfmCx+Hl2ccDgdst1ssl0tsNhus1ytctVvUv3o5FO4zi4fCG8BnSkaFlDwtNvUsX+cEWOvGc6/M+ghBQKsYEgP4G4uB3PM0TYspS3VeG/N3/CXzp1RV3b/qHn4DznRT/ZOKKs4AAAAASUVORK5CYII=')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(r.b)("img",Object(n.a)({parentName:"span"},{className:"gatsby-resp-image-image",alt:"starter-messages",title:"starter-messages",src:"/refarch-eda/static/3e01686c4a0102b79cfdf5a96a266b8e/3cbba/starter-messages.png",srcSet:["/refarch-eda/static/3e01686c4a0102b79cfdf5a96a266b8e/7fc1e/starter-messages.png 288w","/refarch-eda/static/3e01686c4a0102b79cfdf5a96a266b8e/a5df1/starter-messages.png 576w","/refarch-eda/static/3e01686c4a0102b79cfdf5a96a266b8e/3cbba/starter-messages.png 1152w","/refarch-eda/static/3e01686c4a0102b79cfdf5a96a266b8e/0b124/starter-messages.png 1728w","/refarch-eda/static/3e01686c4a0102b79cfdf5a96a266b8e/4ea69/starter-messages.png 2304w","/refarch-eda/static/3e01686c4a0102b79cfdf5a96a266b8e/cb919/starter-messages.png 2526w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    ")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Check out your those messages got into the Kafka topic"),Object(r.b)("span",Object(n.a)({parentName:"li"},{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}}),"\n      ",Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"56.94444444444444%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAABnElEQVQoz51S207CQBDtD/EnalCQiBQImvglxhcffPA3/Aw/wnhBgxTkUjbttt12Lz3uLEJQlAebnMxmZ+bMmbP1KpUK2u0uOp0OfN+35zZ6vR6azSZarRbq9TpqtZqLv4FyjUbD1RK8U78LFiUYjcYo8hz//cqv6HXPLiBEiizLwBOBcBFDKg0lBWTObWVhyzTKctlCcRPGQhQlMotClfD2Dw4xGAytwhFmsxkmYYJgrjGcS/THEi8W79MchZTQWsMYs0W61FfSNHhHtWMEwchiDJ1HuLuPUL0K0b5Z4OSaYe+S4fx2gTnjEFnqFK2Urtd1xI4PHhkrhECSJMjSFONpiKfXAG/vH3jsD/DwPEAwYYjixNZwcM4dAalljEEp9c0Kr1qtLv3jVByDpwK5BqQFi1Ms7IMJaay/GVI7VCm9biYysmAnIamltbQpEcccURRDaXokuVaz9cIb6/8g5Ejt2qTEGI3c/kZkBTVQTNy92YktQgJ5Q81ESDlSTYPCMHS51eDVEDrTnbRbbBGuijYHEIi8KAoX/wJZ8gmBfhp5Zt0M7wAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(r.b)("img",Object(n.a)({parentName:"span"},{className:"gatsby-resp-image-image",alt:"kafka-messages",title:"kafka-messages",src:"/refarch-eda/static/038b8643fdb90fa159073ec62673a771/3cbba/kafka-messages.png",srcSet:["/refarch-eda/static/038b8643fdb90fa159073ec62673a771/7fc1e/kafka-messages.png 288w","/refarch-eda/static/038b8643fdb90fa159073ec62673a771/a5df1/kafka-messages.png 576w","/refarch-eda/static/038b8643fdb90fa159073ec62673a771/3cbba/kafka-messages.png 1152w","/refarch-eda/static/038b8643fdb90fa159073ec62673a771/0b124/kafka-messages.png 1728w","/refarch-eda/static/038b8643fdb90fa159073ec62673a771/4ea69/kafka-messages.png 2304w","/refarch-eda/static/038b8643fdb90fa159073ec62673a771/a0ff5/kafka-messages.png 2538w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    ")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Check out your messages in the Kafka topic have already reached your ",Object(r.b)("inlineCode",{parentName:"p"},"INVENTORY")," queue in your local IBM MQ instance"),Object(r.b)("span",Object(n.a)({parentName:"li"},{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}}),"\n      ",Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"70.1388888888889%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAACBUlEQVQ4y6WSW27aUBCGWQNgkqgGIbaQElgBfesTF1Vt1wEJ2MbG2IDUFYHCZSdVo0o8tBRxtzF/Z6Y4JWlpK9XSr+Njy5+/mTmRq6tLKIkEYrEYErReX7/EzU0OudzP5PN5STabRaFQQKlUQrFYRLlcllQqFbx7+wavXr9HJJlKI5VMInFxgUwmA90wYVo2DKMJy7JgmiZ0XZf7er2Ofr+P2WyG6XSK59fDVyDyQk1CVVWxS6fT9LEG27bRbDbRarXQbrdl7ziOgIfDIXa7HTabDZbLJRaLhWRNe+CAiBKPQ1EURKNRATe0hlgZhiFWnU4H3W4XvV5P9pPJRGx83xfgfD4X+H6/RxAQMB5XHoFJKp0tXIKwWRi2c11X3o1GIzHcbrfwPE/Ah8NBfsJrhGGPwFQKt7Ua6rc16I2GWGqahho94/tqtYrBYCAgtmJwCArzBKiSoVm/g2ORmdlCz2E7Fxa1IOzreDwWu9VqJWtY7lmgRWau24Nju/jgOuhQ/8KhcA8ZyGWGlrwGQXAe2KShuPQhp0N9C3vIgzkFctjsjyXzUDRqvEMg+2QonHAofGwY9GOqwRPYb4E6DYGNuMzT8DMeEAN9KpNL3e/9fwCy4RH4/OjoRyBfAcXz/xfIJdOxmX9+wJdPH3HYbXFs4plz+Bcg93d0f49gs8Z6/g2B9+s5/A432fqj1IlF/gAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(r.b)("img",Object(n.a)({parentName:"span"},{className:"gatsby-resp-image-image",alt:"mq-messages",title:"mq-messages",src:"/refarch-eda/static/4e8eb2054384071bd8b418c28d808dd6/3cbba/mq-message.png",srcSet:["/refarch-eda/static/4e8eb2054384071bd8b418c28d808dd6/7fc1e/mq-message.png 288w","/refarch-eda/static/4e8eb2054384071bd8b418c28d808dd6/a5df1/mq-message.png 576w","/refarch-eda/static/4e8eb2054384071bd8b418c28d808dd6/3cbba/mq-message.png 1152w","/refarch-eda/static/4e8eb2054384071bd8b418c28d808dd6/0b124/mq-message.png 1728w","/refarch-eda/static/4e8eb2054384071bd8b418c28d808dd6/4ea69/mq-message.png 2304w","/refarch-eda/static/4e8eb2054384071bd8b418c28d808dd6/2dd9a/mq-message.png 2558w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    "))),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"You could also inspect the logs of your Kafka Connect Docker container running on your workstation:"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),"docker logs mq-sink\n...\n[2021-01-19 19:44:17,110] DEBUG Putting record for topic inventory, partition 0 and offset 0 (com.ibm.eventstreams.connect.mqsink.MQSinkTask:89)\n[2021-01-19 19:44:17,110] DEBUG Value schema Schema{STRING} (com.ibm.eventstreams.connect.mqsink.builders.DefaultMessageBuilder:60)\n[2021-01-19 19:44:18,292] DEBUG Flushing up to topic inventory, partition 0 and offset 1 (com.ibm.eventstreams.connect.mqsink.MQSinkTask:110)\n[2021-01-19 19:44:18,292] INFO WorkerSinkTask{id=mq-sink-0} Committing offsets asynchronously using sequence number 636: {inventory-0=OffsetAndMetadata{offset=1, leaderEpoch=null, metadata=''}} (org.apache.kafka.connect.runtime.WorkerSinkTask:346)\n[2021-01-19 19:44:18,711] DEBUG Putting record for topic inventory, partition 0 and offset 1 (com.ibm.eventstreams.connect.mqsink.MQSinkTask:89)\n[2021-01-19 19:44:18,711] DEBUG Value schema Schema{STRING} (com.ibm.eventstreams.connect.mqsink.builders.DefaultMessageBuilder:60)\n[2021-01-19 19:44:20,674] DEBUG Putting record for topic inventory, partition 0 and offset 2 (com.ibm.eventstreams.connect.mqsink.MQSinkTask:89)\n[2021-01-19 19:44:20,675] DEBUG Value schema Schema{STRING} (com.ibm.eventstreams.connect.mqsink.builders.DefaultMessageBuilder:60)\n[2021-01-19 19:44:28,293] DEBUG Flushing up to topic inventory, partition 0 and offset 3 (com.ibm.eventstreams.connect.mqsink.MQSinkTask:110)\n[2021-01-19 19:44:28,293] INFO WorkerSinkTask{id=mq-sink-0} Committing offsets asynchronously using sequence number 637: {inventory-0=OffsetAndMetadata{offset=3, leaderEpoch=null, metadata=''}} (org.apache.kafka.connect.runtime.WorkerSinkTask:346)\n[2021-01-19 19:44:38,296] DEBUG Flushing up to topic inventory, partition 0 and offset 3 (com.ibm.eventstreams.connect.mqsink.MQSinkTask:110)\n")))),Object(r.b)("p",null,"To cleanup your environment, you can do"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Remove the connector from your Kafka Connect framework instance (this isn’t really needed if you are going to stop and remove the Kafka Connect Docker container)"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),"curl -X DELETE http://localhost:8083/connectors/mq-sink\n"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Stop both IBM MQ and Kakfa Connect Docker containers running on your workstation"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),"docker stop mq mq-sink\n"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Remove both IBM MQ and Kakfa Connect Docker containers from your workstation"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),"docker rm mq mq-sink\n")))))}d.isMDXComponent=!0},BAC9:function(e,a,t){e.exports={bxTextTruncateEnd:"EditLink-module--bx--text-truncate--end--2pqje",bxTextTruncateFront:"EditLink-module--bx--text-truncate--front--3_lIE",link:"EditLink-module--link--1qzW3",row:"EditLink-module--row--1B9Gk"}},I8xM:function(e,a,t){e.exports={bxTextTruncateEnd:"PageTabs-module--bx--text-truncate--end--267NA",bxTextTruncateFront:"PageTabs-module--bx--text-truncate--front--3xEQF",tabsContainer:"PageTabs-module--tabs-container--8N4k0",list:"PageTabs-module--list--3eFQc",listItem:"PageTabs-module--list-item--nUmtD",link:"PageTabs-module--link--1mDJ1",selectedItem:"PageTabs-module--selected-item--YPVr3"}},QH2O:function(e,a,t){e.exports={bxTextTruncateEnd:"PageHeader-module--bx--text-truncate--end--mZWeX",bxTextTruncateFront:"PageHeader-module--bx--text-truncate--front--3zvrI",pageHeader:"PageHeader-module--page-header--3hIan",withTabs:"PageHeader-module--with-tabs--3nKxA",text:"PageHeader-module--text--o9LFq"}}}]);
//# sourceMappingURL=component---src-pages-use-cases-connect-mq-index-mdx-36633d86b52bb2b14dcd.js.map