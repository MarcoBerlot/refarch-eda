{"version":3,"sources":["webpack:///./node_modules/gatsby-theme-carbon/src/components/PageHeader/index.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/PageHeader/PageHeader.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/EditLink/index.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/EditLink/EditLink.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/PageTabs/index.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/PageTabs/PageTabs.js","webpack:///./node_modules/gatsby-theme-carbon/src/templates/Default.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/EditLink/EditLink.module.scss","webpack:///./node_modules/gatsby-theme-carbon/src/components/PageTabs/PageTabs.module.scss","webpack:///./src/pages/patterns/intro/index.mdx","webpack:///./node_modules/gatsby-theme-carbon/src/components/PageHeader/PageHeader.module.scss"],"names":["PageHeader","title","tabs","className","cx","pageHeader","withTabs","length","id","text","EditLink","relativePagePath","repositoryProp","repository","useStaticQuery","site","siteMetadata","baseUrl","subDirectory","href","branch","row","link","PageTabs","render","this","props","slug","currentTab","split","filter","Boolean","slice","pageTabs","map","tab","slugifiedTab","slugify","lower","strict","selected","currentTabRegex","RegExp","replace","key","selectedItem","listItem","to","tabsContainer","list","React","Component","Default","pageContext","children","location","Title","frontmatter","titleType","theme","description","keywords","pathPrefix","pathname","Layout","homepage","pageTitle","pageDescription","pageKeywords","label","Main","padded","NextPrevious","Utils","module","exports","_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","isMDXComponent"],"mappings":"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","file":"component---src-pages-patterns-intro-index-mdx-a8aac1f4c1fbc9ba4086.js","sourcesContent":["import PageHeader from './PageHeader';\n\nexport default PageHeader;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport { pageHeader, withTabs, text } from './PageHeader.module.scss';\n\nconst PageHeader = ({ title, tabs = [] }) => (\n  <div className={cx(pageHeader, { [withTabs]: tabs.length })}>\n    <div className=\"bx--grid\">\n      <div className=\"bx--row\">\n        <div className=\"bx--col-lg-12\">\n          <h1 id=\"page-title\" className={text}>\n            {title}\n          </h1>\n        </div>\n      </div>\n    </div>\n  </div>\n);\n\nPageHeader.propTypes = {\n  /**\n   * Specify the title for the page\n   */\n  title: PropTypes.node,\n};\n\nexport default PageHeader;\n","import EditLink from './EditLink';\n\nexport default EditLink;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { graphql, useStaticQuery } from 'gatsby';\n\nimport { link, row } from './EditLink.module.scss';\n\nconst EditLink = ({ relativePagePath, repository: repositoryProp }) => {\n  const {\n    site: {\n      siteMetadata: { repository },\n    },\n  } = useStaticQuery(graphql`\n    query REPOSITORY_QUERY {\n      site {\n        siteMetadata {\n          repository {\n            baseUrl\n            subDirectory\n            branch\n          }\n        }\n      }\n    }\n  `);\n\n  const { baseUrl, subDirectory, branch } = repositoryProp || repository;\n\n  const href = `${baseUrl}/edit/${branch}${subDirectory}/src/pages${relativePagePath}`;\n\n  return baseUrl ? (\n    <div className={`bx--row ${row}`}>\n      <div className=\"bx--col\">\n        <a className={link} href={href}>\n          Edit this page on GitHub\n        </a>\n      </div>\n    </div>\n  ) : null;\n};\n\nEditLink.propTypes = {\n  repository: PropTypes.shape({\n    baseUrl: PropTypes.string,\n    subDirectory: PropTypes.string,\n    branch: PropTypes.string,\n  }),\n  relativePagePath: PropTypes.string,\n};\n\nexport default EditLink;\n","import PageTabs from './PageTabs';\n\nexport default PageTabs;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'gatsby';\nimport slugify from 'slugify';\nimport cx from 'classnames';\n\nimport {\n  tabsContainer,\n  list,\n  selectedItem,\n  listItem,\n  link,\n} from './PageTabs.module.scss';\n\nexport default class PageTabs extends React.Component {\n  render() {\n    const { tabs, slug } = this.props;\n    const currentTab = slug.split('/').filter(Boolean).slice(-1)[0];\n\n    const pageTabs = tabs.map((tab) => {\n      const slugifiedTab = slugify(tab, { lower: true, strict: true });\n      const selected = slugifiedTab === currentTab;\n      // matches with or without trailing slash: /?\n      // matches with or without hash link: (#.*)?\n      const currentTabRegex = new RegExp(`${currentTab}/?(#.*)?$`);\n      const href = slug.replace(currentTabRegex, slugifiedTab);\n      return (\n        <li key={tab} className={cx({ [selectedItem]: selected }, listItem)}>\n          <Link className={link} to={`${href}`}>\n            {tab}\n          </Link>\n        </li>\n      );\n    });\n\n    return (\n      <div className={tabsContainer}>\n        <div className=\"bx--grid\">\n          <div className=\"bx--row\">\n            <div className=\"bx--col-lg-12 bx--col-no-gutter\">\n              <nav>\n                <ul className={list}>{pageTabs}</ul>\n              </nav>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nPageTabs.propTypes = {\n  tabs: PropTypes.array,\n  slug: PropTypes.string,\n};\n","import React from 'react';\nimport slugify from 'slugify';\nimport { useStaticQuery, graphql } from 'gatsby';\n\nimport Utils from '../components/Utils';\nimport Layout from '../components/Layout';\nimport PageHeader from '../components/PageHeader';\nimport EditLink from '../components/EditLink';\nimport NextPrevious from '../components/NextPrevious';\nimport PageTabs from '../components/PageTabs';\nimport Main from '../components/Main';\n\nconst Default = ({ pageContext, children, location, Title }) => {\n  const { frontmatter = {}, relativePagePath, titleType } = pageContext;\n  const { tabs, title, theme, description, keywords } = frontmatter;\n\n  // get the path prefix if it exists\n  const {\n    site: { pathPrefix },\n  } = useStaticQuery(graphql`\n    query PATH_PREFIX_QUERY {\n      site {\n        pathPrefix\n      }\n    }\n  `);\n\n  // let gatsby handle prefixing\n  const slug = pathPrefix\n    ? location.pathname.replace(pathPrefix, '')\n    : location.pathname;\n\n  const getCurrentTab = () => {\n    if (!tabs) return '';\n    return (\n      slug.split('/').filter(Boolean).slice(-1)[0] ||\n      slugify(tabs[0], { lower: true })\n    );\n  };\n\n  const currentTab = getCurrentTab();\n\n  return (\n    <Layout\n      tabs={tabs}\n      homepage={false}\n      theme={theme}\n      pageTitle={title}\n      pageDescription={description}\n      pageKeywords={keywords}\n      titleType={titleType}>\n      <PageHeader title={Title ? <Title /> : title} label=\"label\" tabs={tabs} />\n      {tabs && <PageTabs slug={slug} tabs={tabs} currentTab={currentTab} />}\n      <Main padded>\n        {children}\n        <EditLink relativePagePath={relativePagePath} />\n      </Main>\n      <NextPrevious\n        pageContext={pageContext}\n        location={location}\n        slug={slug}\n        tabs={tabs}\n        currentTab={currentTab}\n      />\n      <Utils />\n    </Layout>\n  );\n};\n\nexport default Default;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bxTextTruncateEnd\":\"EditLink-module--bx--text-truncate--end--2pqje\",\"bxTextTruncateFront\":\"EditLink-module--bx--text-truncate--front--3_lIE\",\"link\":\"EditLink-module--link--1qzW3\",\"row\":\"EditLink-module--row--1B9Gk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bxTextTruncateEnd\":\"PageTabs-module--bx--text-truncate--end--267NA\",\"bxTextTruncateFront\":\"PageTabs-module--bx--text-truncate--front--3xEQF\",\"tabsContainer\":\"PageTabs-module--tabs-container--8N4k0\",\"list\":\"PageTabs-module--list--3eFQc\",\"listItem\":\"PageTabs-module--list-item--nUmtD\",\"link\":\"PageTabs-module--link--1mDJ1\",\"selectedItem\":\"PageTabs-module--selected-item--YPVr3\"};","import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/refarch-eda/refarch-eda/docs/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component '\" + name + \"' was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1>{`Introduction`}</h1>\n    <p>{`In this set of articles, we will detail some of the most import event-driven patterns that can be utilised during your event-driven microservice implementation.`}</p>\n    <p>{`Adopting messaging (Pub/Sub) as a microservice communication approach involves using, at least, the following patterns:`}</p>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://microservices.io/patterns/decomposition/decompose-by-subdomain.html\"\n        }}>{`Decompose by subdomain`}</a>{`: The domain-driven design approach is useful to identify and classify business\nfunctions and the corresponding microservices that would be associated with them. With the event storming method, aggregates help to find those subdomains of responsibility. (Source Chris Richardson - Microservices Patterns)`}</li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://microservices.io/patterns/data/database-per-service.html\"\n        }}>{`Database per service`}</a>{`: Each service persists data privately and is accessible only via its API.\nServices are loosely coupled limiting impact to other services when schema changes occur in the database. The chosen database technology is driven by business requirements. (Source Chris Richardson - Microservices Patterns)\nThe implementation of transactions that span multiple services is complex and enforces using the Saga pattern. Queries that span multiple entities are a challenge and CQRS represents an interesting solution.`}</li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#strangler-pattern\"\n        }}>{`Strangler pattern`}</a>{`: Used to incrementally migrate an existing, monolithic, application by replacing a set of features to a microservice but keep both running in parallel.\nApplying a domain driven design approach, you may strangle the application using bounded context. But then as soon as this pattern is applied, you need to assess the co-existence between\nexisting bounded contexts and the new microservices. One of the challenges will be to define where the write and read operations occurs, and how data should be replicated between the contexts.\nThis is where event driven architecture helps.`}</li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"/refarch-eda/patterns/event-sourcing/\"\n        }}>{`Event sourcing`}</a>{`: persists, to an append log, the states of a business entity, such as an Order, as a sequence of immutable state-changing events.`}</li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"/refarch-eda/patterns/cqrs/\"\n        }}>{`Command Query Responsibility Segregation`}</a>{`: helps to separate queries from commands and help to address queries with cross-microservice boundary.`}</li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"/refarch-eda/patterns/saga/\"\n        }}>{`Saga pattern:`}</a>{` Microservices publish events when something happens in the scope of their control like an update in the business entities they are responsible for. A microservice, interested in other business entities, subscribes to those events and it can update its own state and business entities on receipt of these events. Business entity keys need to be unique and immutable.`}</li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"/refarch-eda/patterns/dlq/\"\n        }}>{`Event reprocessing with dead letter`}</a>{`: event driven microservices may have to call external services via a synchronous call. We need to process failure in order to get response from those services using event backbone.`}</li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#transactional-outbox\"\n        }}>{`Transactional outbox`}</a>{`: A service command typically needs to update the database and send messages/events.\nThe approach is to use an outbox table to keep the message to sent and a message relay process to publish events inserted into database to the event backbone. (Source Chris Richardson - Microservices Patterns)`}</li>\n    </ul>\n    <h2>{`Strangler pattern`}</h2>\n    <h3>{`Problem`}</h3>\n    <p>{`How to migrate a monolithic application to a microservice based architecture without doing the huge effort of redeveloping the application from a blank slate. Replacing and rewriting an existing application can be a huge investment. Rewriting a subset of business functions while running current application in parallel may be relevant and reduce risk and velocity of changes.`}</p>\n    <p>{`The figure below illustrates a typical mainframe application, with external Java based user interface connected to the mainframe via iop/corba and with three different applications to manage product, order and customer.`}</p>\n    <span {...{\n      \"className\": \"gatsby-resp-image-wrapper\",\n      \"style\": {\n        \"position\": \"relative\",\n        \"display\": \"block\",\n        \"marginLeft\": \"auto\",\n        \"marginRight\": \"auto\",\n        \"maxWidth\": \"422px\"\n      }\n    }}>{`\n      `}<span parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-background-image\",\n        \"style\": {\n          \"paddingBottom\": \"121.18055555555556%\",\n          \"position\": \"relative\",\n          \"bottom\": \"0\",\n          \"left\": \"0\",\n          \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAABYlAAAWJQFJUiTwAAAEyklEQVQ4y32VCVNTVxiG/UGd6e/ob+h0utsiDNa16lCnatVaaG2naq2lKhoh7GiAYEIgCUsIgQRCAiGQhCxws94sZIGwPD25oghSz8ybc/PlO+/5ljffPYZYu7u7vF6bWztslLffYHNv39nzedv3qHWs4vDa6Xa3hwuPZqnvXOBm27yCay0ubrS6Ofn3NOFEQfHbeQ/pAcJP6i18UNVP1R0bpx7YxT5J7f1pPrps4sNqLc5AWvHb3nl15jDeEL5eervE3V4vnaMhOscjNA6G0E2v8lDno2nQT7ZQfm+6Fa5jlYdCqUwsXSJf2qK4ua3s8WyZyWAZKVNGzm8rdjm3SSK7cQDxzAby+sZ+hJWPmJzHtZJRUpr1p5XdJTC5lMbqTdMxVdll4SMzV/ltJc1cBZXnYJbl1Qw7Ozv7hHKuxMCEj5cTyximAugn/ehtKwzZg5jsAZ5bguhsQYyOEIbpEC+tfgw2P8PTAfrGvHiCyUq++4SZXBGVMcj9kXUejBXonSsyNhNErXNTr41z9UWUG71ROoxLmO0reNfydDnyqKdL/KGLMrmYqFRQ4VQIc+sF7g1K1HRkqe3KUT+YxbEoobWtcrZL5pvmJCfUCaVRk+6IUoZLmixnetb5UpVgyJV6l/CROc7nTWt89TTKhfYIAxYvbWY/1c0SX6uiVDVHUQ0HRFmWaB1eorZljS+aJI6rYox7sxV1HiT8xxgVkST4piXJVU2c0dkQ/bYI57pSIsoUpztT9FjXFPuAsJ/tTHBdm+ZUexzTfPpdwvsGibr+Ag3GEndHCkTlEhaPzEl1lHvmHD9qkmjtcSS5yHykwDVdgdbZLa4PyOicyYMpr+eL3NGtUafJ8GyqKG5OMbsUY9AhiZSj1OtSXNEkaB0JK3azK87F57JoYJ7znXEMc6mjCc91xng8LoqtFumOLaIeXuaEqOFjS5af+pM81Ptf2Ye8fKtapUGXpO55AtNC5mDK+UKRWy9WuG3I8MSa52pfUshDaMwa5ru2OHdNOWFL0WIKMu4MYXRG+b4nRfNUgSu9SYbc8rsR/q4N85uo38PJMn+NlTDZfHSZfZxui/FoPMeF7iTNQ35GxUULq6IseqHd6TI3RA0H544kDCmSqWlNUNe1hlEIuHs8KCKM8fOA6HJHnBZzUPl3dI8FONMeo16f5mK36PLCoS7nBWGDJsDHjRE+eyxxrjVEj3GeFqG3qmdriu24SuKJwY9mxINK76FaFeFKn6zU2LxwhGz+HAhzqa/AD9oijdZN3L44zeLgKVHDGrVAS0wQLeP0RlmKbXLLUOTyQFFklBQ6PJRyvlDi196gEHWa6vYsN1+msXskeidCIrUE1eJQbWucDjEnra4II+4453tkatozfNoUOxjh1tYWsUQKiyvIC+sKPRNheq1isohJY3ZG0Dpi9DmS9AtRG2cimGbCYgqFaJuI8XQ0jnoiiSecFWR74ysqSUxabUxZXUxNuHE7ZvDMu3Avy5j1QSymEDOOKDZLhDFTmGl7jGWpQCC6TlAgIK3je3serkYiDA+ZaPx3ll8a3Gg0E1itFtweHy73MnMCrgWf+O5XMC+w4A0wvwfXop+V0Or+xE7LYvI653C7nArmnE58yz529278n7fHIey/U/4DqtWRIAt+jQMAAAAASUVORK5CYII=')\",\n          \"backgroundSize\": \"cover\",\n          \"display\": \"block\"\n        }\n      }}></span>{`\n  `}<img parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-image\",\n        \"alt\": \"1\",\n        \"title\": \"1\",\n        \"src\": \"/refarch-eda/static/e5babc48dd0b2046fba50ac04c4ed54f/011fd/strangler.png\",\n        \"srcSet\": [\"/refarch-eda/static/e5babc48dd0b2046fba50ac04c4ed54f/7fc1e/strangler.png 288w\", \"/refarch-eda/static/e5babc48dd0b2046fba50ac04c4ed54f/011fd/strangler.png 422w\"],\n        \"sizes\": \"(max-width: 422px) 100vw, 422px\",\n        \"style\": {\n          \"width\": \"100%\",\n          \"height\": \"100%\",\n          \"margin\": \"0\",\n          \"verticalAlign\": \"middle\",\n          \"position\": \"absolute\",\n          \"top\": \"0\",\n          \"left\": \"0\"\n        },\n        \"loading\": \"lazy\"\n      }}></img>{`\n    `}</span>\n    <h3>{`Solution`}</h3>\n    <p>{`The approach is to use a “strangler” interface to dispatch a request to new or old features. Existing features to migrate are selected by trying to isolate sub components.`}</p>\n    <p>{`One of main challenges is to isolate the data store and disover how the new microservices and the legacy application are accessing the shared data. Continuous data replication can be a solution to propagate write model to read model. Write model will most likely stays on the monolitic application, change data capture can be used, with event backbone to propagate change to read model.`}</p>\n    <p>{`The facade needs to be scalable and not a single point of failure. It needs to support new APIs (RESTful) and old API (most likely SOAP).`}</p>\n    <p>{`The following figure illustrates an implementation using an event driven solution with data replication to synchronize the write model to the read model on the mainframe.`}</p>\n    <span {...{\n      \"className\": \"gatsby-resp-image-wrapper\",\n      \"style\": {\n        \"position\": \"relative\",\n        \"display\": \"block\",\n        \"marginLeft\": \"auto\",\n        \"marginRight\": \"auto\",\n        \"maxWidth\": \"1152px\"\n      }\n    }}>{`\n      `}<span parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-background-image\",\n        \"style\": {\n          \"paddingBottom\": \"54.861111111111114%\",\n          \"position\": \"relative\",\n          \"bottom\": \"0\",\n          \"left\": \"0\",\n          \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACWUlEQVQoz2WS3U4TcRDF+xS+gu/iK3jtSxjvjNErkUiMMXKh0UiMHzEoIJQWBKRIQQSE2u/Sdvux3Xa7u93d7nb357TFCjrJ5J+ZTM5/zjkTCcOQIJCUNwSGte/7+J6HJzmMUsPkxtQW1+9tMLeWH/UcX+YC8AIuReRiMQQehu24tNpdtI6B0/do6DaLSYWlZJVMtTuaaZsujXaPouqgtB3UTg+z5xLxBwGpssHSTprXsQP2sxr5ujX5xDRNwsGAf+NrWmdmucpqssjqboHZuEL8RCcyEMDZpQw3ZxPcebHDww8pot/rEwkst09e75DXNGzX5ZwE0ROT259arO0VWd8r8GBFZf7QEsAg4GW8yMx8htheibdbZ6wcNEf6tIRyuVbnuFCiorVxvAHeYIwYTxk8iqlsHJTZ/FHm6bpK9FQAPX/AwnaJd9Esc5+zvFnNyYByTiycUBziCJ6AjnuLRwa33teJfssJ5Rz3l1U+Hgng0FXDtNFUg6bWoy5Ca10Hux/QNmxaslm90Zw4HoZjW5M5nefrCtFEgTXR8NVmTXTtiim+x+lJnp1EFkWp/d1IjFCbDYyOSldrEPjeJVNc0dYye9SaFk3VkqWsUS8SiIamFN2ugW3bssEYzO377Bc6HFdM5EGzfOxeWz4oYRuKaByi6222E4fs7f8U8O7/d/hHtb5tUWo5XHvmcnXK5spdm4WULweaoZJepNdM4Ir2v7IVpqdXePwkNmE30vBiDqNeq5EVZ3dLLl/yHrFsn5bpY+pNlGoetX6GIUesy3Gn8y1KZ5rQdUbMfgP0pC8+CsHZRwAAAABJRU5ErkJggg==')\",\n          \"backgroundSize\": \"cover\",\n          \"display\": \"block\"\n        }\n      }}></span>{`\n  `}<img parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-image\",\n        \"alt\": \"2\",\n        \"title\": \"2\",\n        \"src\": \"/refarch-eda/static/7086a1f93000f13ac1fa369f3888eaf8/3cbba/strangler-2.png\",\n        \"srcSet\": [\"/refarch-eda/static/7086a1f93000f13ac1fa369f3888eaf8/7fc1e/strangler-2.png 288w\", \"/refarch-eda/static/7086a1f93000f13ac1fa369f3888eaf8/a5df1/strangler-2.png 576w\", \"/refarch-eda/static/7086a1f93000f13ac1fa369f3888eaf8/3cbba/strangler-2.png 1152w\", \"/refarch-eda/static/7086a1f93000f13ac1fa369f3888eaf8/b5ea2/strangler-2.png 1318w\"],\n        \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n        \"style\": {\n          \"width\": \"100%\",\n          \"height\": \"100%\",\n          \"margin\": \"0\",\n          \"verticalAlign\": \"middle\",\n          \"position\": \"absolute\",\n          \"top\": \"0\",\n          \"left\": \"0\"\n        },\n        \"loading\": \"lazy\"\n      }}></img>{`\n    `}</span>\n    <h2>{`Transactional outbox`}</h2>\n    <p>{`When distributed transaction is not supported by the messaging middleware (like current Kafka version), it is important to ensure consistency between the records in the database and the events published. In the reference implementation we used the approach to publish to the topic as soon as an order is received via the API and then the same code, is consuming this events to persist to the database. With this approach if write to the topic operation fails, the application can return an error to the user, if the write operation to the database fails, the code can reload from the non-committed record. `}</p>\n    <p>{`But there is another solution presented by the transactional outbox. For detailed information about this pattern see the documentation of the pattern in Chris Richardson’s site: `}<a parentName=\"p\" {...{\n        \"href\": \"https://microservices.io/patterns/data/transactional-outbox.html\"\n      }}>{`Transactional outbox`}</a>{`.`}</p>\n    <p>{`To summarize this pattern, the approach is to use an `}<inlineCode parentName=\"p\">{`outbox`}</inlineCode>{` table to keep the messages to sent and a message relay process to publish events inserted into database to the event backbone. In modern solution this relay is a change data capture agent. The following schema illustrates the approach:`}</p>\n    <span {...{\n      \"className\": \"gatsby-resp-image-wrapper\",\n      \"style\": {\n        \"position\": \"relative\",\n        \"display\": \"block\",\n        \"marginLeft\": \"auto\",\n        \"marginRight\": \"auto\",\n        \"maxWidth\": \"848px\"\n      }\n    }}>{`\n      `}<span parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-background-image\",\n        \"style\": {\n          \"paddingBottom\": \"60.76388888888889%\",\n          \"position\": \"relative\",\n          \"bottom\": \"0\",\n          \"left\": \"0\",\n          \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACAUlEQVQoz42T60/TUBjG9+/7BRNDcAsoyDTKBxfRYBY3IBuXXWA3JsjGNiwbu0jcjbbr2p7z87QD4zQY3uTJc05z3l+enrcNjC3B0cVkpprlK1sxyWk2+Y7kuCW4GgqElJgOqONMlDtC4pVUzz3dV0DrOyzt3BKMjwhujwkpfx4fEzyweJlzWTgUbFcm5NsukfMpkZM+H6oupzfCw+Gx5oBXA4e97y6ZS51kTSfVuCWpCRINh2LTInhos1O+JV03eVfWCadabJQNyl17DngP9ROmNJfuWKL1BZ2RYP/SJd0UNFTT008Dtbc56xlE1bUkm1K5SUXtH3zlaFVQaEO2he+fq5JYTZJT68WMIH6ik1Cw5cwP1rNdXhz11d06SNv9N+H1YMpaesirzGhO60rh7IiV1IhUXV2FZrKaG/C2pM4WhuSvLYTl+MO6T+oDXdfFME3Mv2TcSTcMXMem2tHZ/TYkcT5k97SP9tNEOmr6Qv5O6CnAI2uroPMk3GYx0mNha8D2qYGtW35CIYWCzaYe+JP+kLyqNIfsHbc4yHXIXIzQuhOvf04e8xEJZ5/GrMszh4uzr5QKeYrFEsVCkVKpxMF+il7n5v/AWcIZTNz9GebE4s3Ge0IrqyyvvWZlLez7s6UQ9cblY4DzU5xObRLJJNFolFg8zpdYzPfNzY+0221+AaI5fdIrRMelAAAAAElFTkSuQmCC')\",\n          \"backgroundSize\": \"cover\",\n          \"display\": \"block\"\n        }\n      }}></span>{`\n  `}<img parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-image\",\n        \"alt\": \"3\",\n        \"title\": \"3\",\n        \"src\": \"/refarch-eda/static/e3f24af5a8d43ad3e4427d0a0e12e8fb/c6377/outbox.png\",\n        \"srcSet\": [\"/refarch-eda/static/e3f24af5a8d43ad3e4427d0a0e12e8fb/7fc1e/outbox.png 288w\", \"/refarch-eda/static/e3f24af5a8d43ad3e4427d0a0e12e8fb/a5df1/outbox.png 576w\", \"/refarch-eda/static/e3f24af5a8d43ad3e4427d0a0e12e8fb/c6377/outbox.png 848w\"],\n        \"sizes\": \"(max-width: 848px) 100vw, 848px\",\n        \"style\": {\n          \"width\": \"100%\",\n          \"height\": \"100%\",\n          \"margin\": \"0\",\n          \"verticalAlign\": \"middle\",\n          \"position\": \"absolute\",\n          \"top\": \"0\",\n          \"left\": \"0\"\n        },\n        \"loading\": \"lazy\"\n      }}></img>{`\n    `}</span>\n    <p>{`To get a concrete example of this pattern we have developed a `}<a parentName=\"p\" {...{\n        \"href\": \"/refarch-eda/use-cases/db2-debezium/\"\n      }}>{`deep dive lab`}</a>{` using Quarkus Debezium outbox pattern and a DB2 database.`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      ","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bxTextTruncateEnd\":\"PageHeader-module--bx--text-truncate--end--mZWeX\",\"bxTextTruncateFront\":\"PageHeader-module--bx--text-truncate--front--3zvrI\",\"pageHeader\":\"PageHeader-module--page-header--3hIan\",\"withTabs\":\"PageHeader-module--with-tabs--3nKxA\",\"text\":\"PageHeader-module--text--o9LFq\"};"],"sourceRoot":""}