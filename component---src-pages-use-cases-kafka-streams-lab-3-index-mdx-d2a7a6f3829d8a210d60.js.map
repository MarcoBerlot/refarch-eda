{"version":3,"sources":["webpack:///./node_modules/gatsby-theme-carbon/src/components/PageHeader/index.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/PageHeader/PageHeader.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/EditLink/index.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/EditLink/EditLink.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/PageTabs/index.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/PageTabs/PageTabs.js","webpack:///./node_modules/gatsby-theme-carbon/src/templates/Default.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/EditLink/EditLink.module.scss","webpack:///./node_modules/gatsby-theme-carbon/src/components/PageTabs/PageTabs.module.scss","webpack:///./src/pages/use-cases/kafka-streams/lab-3/index.mdx","webpack:///./node_modules/gatsby-theme-carbon/src/components/PageHeader/PageHeader.module.scss"],"names":["PageHeader","title","tabs","className","cx","pageHeader","withTabs","length","id","text","EditLink","relativePagePath","repositoryProp","repository","useStaticQuery","site","siteMetadata","baseUrl","subDirectory","href","branch","row","link","PageTabs","render","this","props","slug","currentTab","split","filter","Boolean","slice","pageTabs","map","tab","slugifiedTab","slugify","lower","strict","selected","currentTabRegex","RegExp","replace","key","selectedItem","listItem","to","tabsContainer","list","React","Component","Default","pageContext","children","location","Title","frontmatter","titleType","theme","description","keywords","pathPrefix","pathname","Layout","homepage","pageTitle","pageDescription","pageKeywords","label","Main","padded","NextPrevious","Utils","module","exports","_frontmatter","makeShortcode","name","console","warn","InlineNotification","AnchorLinks","AnchorLink","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","kind","parentName","isMDXComponent"],"mappings":"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","file":"component---src-pages-use-cases-kafka-streams-lab-3-index-mdx-d2a7a6f3829d8a210d60.js","sourcesContent":["import PageHeader from './PageHeader';\n\nexport default PageHeader;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport { pageHeader, withTabs, text } from './PageHeader.module.scss';\n\nconst PageHeader = ({ title, tabs = [] }) => (\n  <div className={cx(pageHeader, { [withTabs]: tabs.length })}>\n    <div className=\"bx--grid\">\n      <div className=\"bx--row\">\n        <div className=\"bx--col-lg-12\">\n          <h1 id=\"page-title\" className={text}>\n            {title}\n          </h1>\n        </div>\n      </div>\n    </div>\n  </div>\n);\n\nPageHeader.propTypes = {\n  /**\n   * Specify the title for the page\n   */\n  title: PropTypes.node,\n};\n\nexport default PageHeader;\n","import EditLink from './EditLink';\n\nexport default EditLink;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { graphql, useStaticQuery } from 'gatsby';\n\nimport { link, row } from './EditLink.module.scss';\n\nconst EditLink = ({ relativePagePath, repository: repositoryProp }) => {\n  const {\n    site: {\n      siteMetadata: { repository },\n    },\n  } = useStaticQuery(graphql`\n    query REPOSITORY_QUERY {\n      site {\n        siteMetadata {\n          repository {\n            baseUrl\n            subDirectory\n            branch\n          }\n        }\n      }\n    }\n  `);\n\n  const { baseUrl, subDirectory, branch } = repositoryProp || repository;\n\n  const href = `${baseUrl}/edit/${branch}${subDirectory}/src/pages${relativePagePath}`;\n\n  return baseUrl ? (\n    <div className={`bx--row ${row}`}>\n      <div className=\"bx--col\">\n        <a className={link} href={href}>\n          Edit this page on GitHub\n        </a>\n      </div>\n    </div>\n  ) : null;\n};\n\nEditLink.propTypes = {\n  repository: PropTypes.shape({\n    baseUrl: PropTypes.string,\n    subDirectory: PropTypes.string,\n    branch: PropTypes.string,\n  }),\n  relativePagePath: PropTypes.string,\n};\n\nexport default EditLink;\n","import PageTabs from './PageTabs';\n\nexport default PageTabs;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'gatsby';\nimport slugify from 'slugify';\nimport cx from 'classnames';\n\nimport {\n  tabsContainer,\n  list,\n  selectedItem,\n  listItem,\n  link,\n} from './PageTabs.module.scss';\n\nexport default class PageTabs extends React.Component {\n  render() {\n    const { tabs, slug } = this.props;\n    const currentTab = slug.split('/').filter(Boolean).slice(-1)[0];\n\n    const pageTabs = tabs.map((tab) => {\n      const slugifiedTab = slugify(tab, { lower: true, strict: true });\n      const selected = slugifiedTab === currentTab;\n      // matches with or without trailing slash: /?\n      // matches with or without hash link: (#.*)?\n      const currentTabRegex = new RegExp(`${currentTab}/?(#.*)?$`);\n      const href = slug.replace(currentTabRegex, slugifiedTab);\n      return (\n        <li key={tab} className={cx({ [selectedItem]: selected }, listItem)}>\n          <Link className={link} to={`${href}`}>\n            {tab}\n          </Link>\n        </li>\n      );\n    });\n\n    return (\n      <div className={tabsContainer}>\n        <div className=\"bx--grid\">\n          <div className=\"bx--row\">\n            <div className=\"bx--col-lg-12 bx--col-no-gutter\">\n              <nav>\n                <ul className={list}>{pageTabs}</ul>\n              </nav>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nPageTabs.propTypes = {\n  tabs: PropTypes.array,\n  slug: PropTypes.string,\n};\n","import React from 'react';\nimport slugify from 'slugify';\nimport { useStaticQuery, graphql } from 'gatsby';\n\nimport Utils from '../components/Utils';\nimport Layout from '../components/Layout';\nimport PageHeader from '../components/PageHeader';\nimport EditLink from '../components/EditLink';\nimport NextPrevious from '../components/NextPrevious';\nimport PageTabs from '../components/PageTabs';\nimport Main from '../components/Main';\n\nconst Default = ({ pageContext, children, location, Title }) => {\n  const { frontmatter = {}, relativePagePath, titleType } = pageContext;\n  const { tabs, title, theme, description, keywords } = frontmatter;\n\n  // get the path prefix if it exists\n  const {\n    site: { pathPrefix },\n  } = useStaticQuery(graphql`\n    query PATH_PREFIX_QUERY {\n      site {\n        pathPrefix\n      }\n    }\n  `);\n\n  // let gatsby handle prefixing\n  const slug = pathPrefix\n    ? location.pathname.replace(pathPrefix, '')\n    : location.pathname;\n\n  const getCurrentTab = () => {\n    if (!tabs) return '';\n    return (\n      slug.split('/').filter(Boolean).slice(-1)[0] ||\n      slugify(tabs[0], { lower: true })\n    );\n  };\n\n  const currentTab = getCurrentTab();\n\n  return (\n    <Layout\n      tabs={tabs}\n      homepage={false}\n      theme={theme}\n      pageTitle={title}\n      pageDescription={description}\n      pageKeywords={keywords}\n      titleType={titleType}>\n      <PageHeader title={Title ? <Title /> : title} label=\"label\" tabs={tabs} />\n      {tabs && <PageTabs slug={slug} tabs={tabs} currentTab={currentTab} />}\n      <Main padded>\n        {children}\n        <EditLink relativePagePath={relativePagePath} />\n      </Main>\n      <NextPrevious\n        pageContext={pageContext}\n        location={location}\n        slug={slug}\n        tabs={tabs}\n        currentTab={currentTab}\n      />\n      <Utils />\n    </Layout>\n  );\n};\n\nexport default Default;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bxTextTruncateEnd\":\"EditLink-module--bx--text-truncate--end--2pqje\",\"bxTextTruncateFront\":\"EditLink-module--bx--text-truncate--front--3_lIE\",\"link\":\"EditLink-module--link--1qzW3\",\"row\":\"EditLink-module--row--1B9Gk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bxTextTruncateEnd\":\"PageTabs-module--bx--text-truncate--end--267NA\",\"bxTextTruncateFront\":\"PageTabs-module--bx--text-truncate--front--3xEQF\",\"tabsContainer\":\"PageTabs-module--tabs-container--8N4k0\",\"list\":\"PageTabs-module--list--3eFQc\",\"listItem\":\"PageTabs-module--list-item--nUmtD\",\"link\":\"PageTabs-module--link--1mDJ1\",\"selectedItem\":\"PageTabs-module--selected-item--YPVr3\"};","import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/refarch-eda/refarch-eda/docs/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component '\" + name + \"' was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst InlineNotification = makeShortcode(\"InlineNotification\");\nconst AnchorLinks = makeShortcode(\"AnchorLinks\");\nconst AnchorLink = makeShortcode(\"AnchorLink\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <InlineNotification kind=\"warning\" mdxType=\"InlineNotification\">\n      <strong>Work in progress</strong> Updated 04/13/2020 - End to end testing could be better\n    </InlineNotification>\n    <AnchorLinks mdxType=\"AnchorLinks\">\n    <AnchorLink mdxType=\"AnchorLink\">Overview</AnchorLink>\n    <AnchorLink mdxType=\"AnchorLink\">Pre-requisites</AnchorLink>\n    <AnchorLink mdxType=\"AnchorLink\">Deploy to OpenShift</AnchorLink>\n    <AnchorLink mdxType=\"AnchorLink\">Interactive queries</AnchorLink>\n    <AnchorLink mdxType=\"AnchorLink\">Integration Tests</AnchorLink>\n    </AnchorLinks>\n    <h2>{`Overview`}</h2>\n    <p>{`In this lab, we’re going to use `}<a parentName=\"p\" {...{\n        \"href\": \"https://quarkus.io\"\n      }}>{`Quarkus`}</a>{` to develop the real time inventory logic using Kafka Streams APIs and microprofile reactive messaging.`}</p>\n    <p>{`The requirements to address are:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`consume item sold events from the `}<inlineCode parentName=\"li\">{`items`}</inlineCode>{` topic. Item has SKU as unique key. Item event has store ID reference`}</li>\n      <li parentName=\"ul\">{`compute for each item its current stock cross stores`}</li>\n      <li parentName=\"ul\">{`compute the store’s stock for each item`}</li>\n      <li parentName=\"ul\">{`generate inventory event for store - item - stock`}</li>\n      <li parentName=\"ul\">{`expose APIs to get stock for a store or for an item`}</li>\n    </ul>\n    <p>{`Here is a simple diagram to illustrate the components used:`}</p>\n    <p>{` `}<span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"736px\"\n        }\n      }}>{`\n      `}<span parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-background-image\",\n          \"style\": {\n            \"paddingBottom\": \"42.36111111111111%\",\n            \"position\": \"relative\",\n            \"bottom\": \"0\",\n            \"left\": \"0\",\n            \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABnElEQVQoz12SyW4TQRCG/bQcuHHjwlsgJRcuHEGASKQgc8AHgmIRxRbB9ogo3iCWJx57Fs/SM+Pu/qgekxAo6S91Vdf2V3frtNvja6fNxacOC8+DLINtKoghibFxIIgEMTqKGhg5b32fYDIjms8JZzPUcglFQeuHd0rvssPnL12uplOc9PwOzy8ecdB/zIvBU87895QaKmNRugnhqP+Tg5cfOTk54vXbd3ij0b4gWc6daG2oKmh/O+Ow+4w3V084vn7F4HZIVe6w1mCNQRRK7DTJybOUVFjVSgmrLS0ThUz8mCRX9GYBUaruG/hxxehmQ5TVDH6FGCm207qBMZp/RO5sktByu9kkW5I0p30+JFUVZalkfRF975rv4xtm/poP3UuUUNrnGuqdm9j+hTTBFXTKiXOKxulaqJd1TVVXDyax4tdoidu5afhPXL4raNZrtPDX0v0OMiLNMgXODhYLkiBobCuxVu7Ng/gGabqnXIQh5WaDEpRyLqTBSr7Brbx4IF9iOR4zHQ6Zyyv6k8m9P1utmvjyT56SvFoV/AaWvlsqWlP79gAAAABJRU5ErkJggg==')\",\n            \"backgroundSize\": \"cover\",\n            \"display\": \"block\"\n          }\n        }}></span>{`\n  `}<img parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-image\",\n          \"alt\": \"1\",\n          \"title\": \"1\",\n          \"src\": \"/refarch-eda/static/f3188b6e60b2cdd96da5618eff13295b/d2d67/item-aggregator-ctx.png\",\n          \"srcSet\": [\"/refarch-eda/static/f3188b6e60b2cdd96da5618eff13295b/7fc1e/item-aggregator-ctx.png 288w\", \"/refarch-eda/static/f3188b6e60b2cdd96da5618eff13295b/a5df1/item-aggregator-ctx.png 576w\", \"/refarch-eda/static/f3188b6e60b2cdd96da5618eff13295b/d2d67/item-aggregator-ctx.png 736w\"],\n          \"sizes\": \"(max-width: 736px) 100vw, 736px\",\n          \"style\": {\n            \"width\": \"100%\",\n            \"height\": \"100%\",\n            \"margin\": \"0\",\n            \"verticalAlign\": \"middle\",\n            \"position\": \"absolute\",\n            \"top\": \"0\",\n            \"left\": \"0\"\n          },\n          \"loading\": \"lazy\"\n        }}></img>{`\n    `}</span></p>\n    <p>{`The goal of this lab, is to develop the green component which exposes an API to support Kafka Streams interactive query on top of the aggregate to compute inventory views and saved in state store (light blue storage/per service deployed and persisted in Kafka as topic).`}</p>\n    <p>{`We will be unit testing the stream logic using `}<a parentName=\"p\" {...{\n        \"href\": \"https://kafka.apache.org/documentation/streams/\"\n      }}>{`Apache Kafka Streams`}</a>{` TopologyTestDriver class. `}</p>\n    <p>{`This application is deployed to OpenShift cluster with Event Streams or Strimzi running in the same cluster. We use the Quarkus Kubernetes plugin to build the yaml manifests for deployment. `}</p>\n    <p>{`This application needs the `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/ibm-cloud-architecture/refarch-eda-store-simulator\"\n      }}>{`Item Store sell simulator`}</a>{` to perform the end to end testing and to demonstrate the end to end scenario.`}</p>\n    <h2>{`Pre-requisites`}</h2>\n    <p><strong parentName=\"p\">{`OpenShift Container Platform`}</strong></p>\n    <ul>\n      <li parentName=\"ul\">{`v4.6.x`}</li>\n    </ul>\n    <p><strong parentName=\"p\">{`IBM Cloud Pak for Integration`}</strong></p>\n    <ul>\n      <li parentName=\"ul\">{`CP4I2021.4`}</li>\n    </ul>\n    <p><strong parentName=\"p\">{`Kafka`}</strong></p>\n    <ul>\n      <li parentName=\"ul\">{`The lab uses Event Streams v10.x on Cloud Pack for Integration or Kafka Strimzi.`}</li>\n    </ul>\n    <p><strong parentName=\"p\">{`Code Source`}</strong>{`: clone the following git repository: `}<inlineCode parentName=\"p\">{`git clone https://github.com/ibm-cloud-architecture/refarch-eda-item-inventory`}</inlineCode>{`.`}</p>\n    <h2>{`Use application as-is`}</h2>\n    <p>{`If you do not want to develop the application, you can deploy the existing final app to your OpenShift clustr using our `}<a parentName=\"p\" {...{\n        \"href\": \"https://hub.docker.com/r/ibmcase/item-aggregator\"\n      }}>{`docker image`}</a>{` and the following steps:`}</p>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Get the Kafka streams credentials and Bootstrap URL`}</p>\n        <p parentName=\"li\">{`As the application is deployed in the same cluster as the Kafka cluster we will use internal route.`}</p>\n      </li>\n    </ol>\n    <h3>{`Connect to Event Streams`}</h3>\n    <p>{`We need to complete the configuration to connect to the remote Event Streams running on OpenShift.`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Create the items and inventory topics, following the instructions as described `}{`[in this note]`}{`(../.. /overview/pre-requisites#creating-event-streams-topics) or using the following command:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`cloudctl es topic-create --name items --partitions 3 --replication-factor 3\ncloudctl es topic-create --name inventory --partitions 1 --replication-factor 3\ncloudctl es topics\n`}</code></pre>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`To connect from your computer to Event Streams running on OpenShift, we need to define a user with `}<inlineCode parentName=\"p\">{`scram-sha-512`}</inlineCode>{` password, as this is the mechanism for external to the cluster connection. `}<a parentName=\"p\" {...{\n            \"href\": \"https://ibm.github.io/event-streams/getting-started/connecting/\"\n          }}>{`See product documentation`}</a>{` on how to do it, or use our `}<a parentName=\"p\" {...{\n            \"href\": \"/refarch-eda/use-cases/overview/pre-requisites#get-shram-user\"\n          }}>{`quick summary here`}</a>{`.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Get Server TLS certificate into the `}<inlineCode parentName=\"p\">{`certs`}</inlineCode>{` folder. See our `}<a parentName=\"p\" {...{\n            \"href\": \"/refarch-eda/use-cases/overview/pre-requisites#get-tls-server-public-certificate\"\n          }}>{`quick summary here`}</a></p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`oc get secret minimal-prod-cluster-ca-cert  -n eventstreams --export -o yaml | oc apply -f - \n\n`}</code></pre>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Modify the `}<inlineCode parentName=\"p\">{`application.properties`}</inlineCode>{` file to define the kafka connection properties. We need two type of definitions, one for the kafka admin client so the kafka streams can create topics to backup state stores, and one for kafka streams consumer and producer tasks:`}</p>\n      </li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-properties\"\n      }}>{`kafka.bootstrap.servers=\\${KAFKA_BROKERS}\nkafka.security.protocol=\\${SECURE_PROTOCOL}\nkafka.ssl.protocol=TLSv1.2\n%dev.kafka.sasl.jaas.config=org.apache.kafka.common.security.scram.ScramLoginModule required username\\\\=\\\\\"\\${KAFKA_USER}\\\\\" password\\\\=\\\\\"\\${KAFKA_PASSWORD}\\\\\";\n%dev.kafka.sasl.mechanism=SCRAM-SHA-512\nkafka.ssl.truststore.location=\\${KAFKA_CERT_PATH}\nkafka.ssl.truststore.password=\\${KAFKA_CERT_PWD}\nkafka.ssl.truststore.type=PKCS12\n%prod.kafka.ssl.keystore.location=\\${USER_CERT_PATH}\n%prod.kafka.ssl.keystore.password=\\${USER_CERT_PWD}\n%prod.kafka.ssl.keystore.type=PKCS12\n`}</code></pre>\n    <p>{`The above settings take into account that when running locally (`}<inlineCode parentName=\"p\">{`%dev`}</inlineCode>{` profile) we use the `}<inlineCode parentName=\"p\">{`scram-sha`}</inlineCode>{` mechanism to authenticate, and when we deploy on openshift, the `}<inlineCode parentName=\"p\">{`%prod`}</inlineCode>{` profile is used with TLS mutual authentication  (client certificate in keystore).`}</p>\n    <p>{`The same approach applies for Kafka Stream:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`quarkus.kafka-streams.bootstrap-servers=\\${KAFKA_BROKERS}\nquarkus.kafka-streams.security.protocol=\\${SECURE_PROTOCOL}\nquarkus.kafka-streams.ssl.protocol=TLSv1.2\n%dev.quarkus.kafka-streams.sasl.mechanism=SCRAM-SHA-512\n%dev.quarkus.kafka-streams.sasl.jaas.config=org.apache.kafka.common.security.scram.ScramLoginModule required username\\\\=\\\\\"\\${KAFKA_USER}\\\\\" password\\\\=\\\\\"\\${KAFKA_PASSWORD}\\\\\";\nquarkus.kafka-streams.ssl.truststore.location=\\${KAFKA_CERT_PATH}\nquarkus.kafka-streams.ssl.truststore.password=\\${KAFKA_CERT_PWD}\nquarkus.kafka-streams.ssl.truststore.type=PKCS12\n# Only if TLS is used for authentication instead of scram\n%prod.quarkus.kafka-streams.ssl.keystore.location=\\${USER_CERT_PATH}\n%prod.quarkus.kafka-streams.ssl.keystore.password=\\${USER_CERT_PWD}\n%prod.quarkus.kafka-streams.ssl.keystore.type=PKCS12\n`}</code></pre>\n    <ul>\n      <li parentName=\"ul\">{`Define a file, like `}<inlineCode parentName=\"li\">{`.env`}</inlineCode>{`, to set environment variables, and modify the settings from your Event Streams configuration.`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{}}>{`KAFKA_BROKERS=minimal-prod-kafka-bootstrap-eventstreams....containers.appdomain.cloud:443\nKAFKA_USER=\nKAFKA_PASSWORD=\nKAFKA_CERT_PATH=\\${PWD}/certs/es-cert.p12\nKAFKA_CERT_PWD=\nSECURE_PROTOCOL=SASL_SSL\n`}</code></pre>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Restart the quarkus in dev mode`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`source .env\n./mvnw quarkus:dev\n`}</code></pre>\n        <p parentName=\"li\">{`normally you should not get any exception and should get a trace like`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{}}>{`   AdminClientConfig values: \n   bootstrap.servers = [minimal-prod-kafka-bootstrap-eventstreams.gse-.....containers.appdomain.cloud:443]\n   client.dns.lookup = default\n   client.id = \n   connections.max.idle.ms = 300000\n   default.api.timeout.ms = 60000\n   metadata.max.age.ms = 300000\n   metric.reporters = []\n   metrics.num.samples = 2\n   metrics.recording.level = INFO\n   metrics.sample.window.ms = 30000\n\n   ....\n   INFO  [io.quarkus] (Quarkus Main Thread) Installed features: [cdi, kafka-streams, kubernetes, kubernetes-client, mutiny, resteasy, resteasy-jsonb, resteasy-mutiny, smallrye-context-propagation, smallrye-health, smallrye-openapi, smallrye-reactive-messaging, smallrye-reactive-messaging-kafka, swagger-ui, vertx]\n`}</code></pre>\n      </li>\n    </ul>\n    <h2>{`Integration tests`}</h2>\n    <p>{` For running the integration test, we propose to copy the e2e folder from the solution repository and follow the `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/ibm-cloud-architecture/refarch-eda-item-inventory#end-to-end-testing\"\n      }}>{`readme instructions section end-to-end-testing `}</a>{`.`}</p>\n    <h2>{`Deploy to OpenShift`}</h2>\n    <p>{`Be sure to have done `}<a parentName=\"p\" {...{\n        \"href\": \"../../overview/pre-requisites#getting-tls-authentication-from-event-streams-on-openshift\"\n      }}>{`the steps described here`}</a>{` to get user credentials and server side certificate. `}</p>\n    <p>{`The deployment is done using Quarkus kubernetes plugin which generates DeploymentConfig and other kubernetes manifests.`}<br parentName=\"p\"></br>{`\n`}{`Here are the interesting properties to set environment variables from secrets `}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-properties\"\n      }}>{`%prod.quarkus.openshift.env-vars.KAFKA_USER.value=sandbox-rp-tls-cred\nquarkus.openshift.env-vars.SECURE_PROTOCOL.value=SSL\nquarkus.openshift.env-vars.SECURE_PROTOCOL.value=SASL_SSL\nquarkus.openshift.env-vars.KAFKA_BROKERS.value=sandbox-rp-kafka-bootstrap.eventstreams.svc:9093\nquarkus.openshift.env-vars.KAFKA_CERT_PATH.value=/deployments/certs/server/ca.p12\nquarkus.openshift.env-vars.KAFKA_PASSWORD.secret=sandbox-rp-tls-cred\nquarkus.openshift.env-vars.KAFKA_PASSWORD.value=user.password\nquarkus.openshift.env-vars.KAFKA_CERT_PWD.secret=sandbox-rp-cluster-ca-cert\nquarkus.openshift.env-vars.KAFKA_CERT_PWD.value=ca.password\nquarkus.openshift.env-vars.USER_CERT_PATH.value=/deployments/certs/user/user.p12\nquarkus.openshift.env-vars.USER_CERT_PWD.secret=sandbox-rp-tls-cred\nquarkus.openshift.env-vars.USER_CERT_PWD.value=user.password\n`}</code></pre>\n    <p>{`And an extract of the expected generated openshift manifests from those configurations:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`    spec:\n      containers:\n      - env:\n        - name: KAFKA_CERT_PWD\n          valueFrom:\n            secretKeyRef:\n              key: ca.password\n              name: sandbox-rp-cluster-ca-cert\n        - name: USER_CERT_PATH\n          value: /deployments/certs/user/user.p12\n        - name: USER_CERT_PWD\n          valueFrom:\n            secretKeyRef:\n              key: user.password\n              name: sandbox-rp-tls-cred\n        - name: KAFKA_BROKERS\n          value: sandbox-rp-kafka-bootstrap.eventstreams.svc:9093\n        - name: KAFKA_CERT_PATH\n          value: /deployments/certs/server/ca.p12\n        - name: KAFKA_PASSWORD\n          valueFrom:\n            secretKeyRef:\n              key: user.password\n              name: sandbox-rp-tls-cred\n        - name: SECURE_PROTOCOL\n          value: SASL_SSL\n`}</code></pre>\n    <p>{`Finally the TLS certificated are mounted to the expected locations defined in the environment variables. The properties for that are:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`quarkus.openshift.mounts.es-cert.path=/deployments/certs/server\nquarkus.openshift.secret-volumes.es-cert.secret-name=sandbox-rp-cluster-ca-cert\nquarkus.openshift.mounts.user-cert.path=/deployments/certs/user\nquarkus.openshift.secret-volumes.user-cert.secret-name=sandbox-rp-tls-cred\n`}</code></pre>\n    <p>{`which generates:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`        volumeMounts:\n        - mountPath: /deployments/certs/server\n          name: es-cert\n          readOnly: false\n          subPath: \"\"\n        - mountPath: /deployments/certs/user\n          name: user-cert\n          readOnly: false\n          subPath: \"\"\n`}</code></pre>\n    <p>{`Now any deployment using the following command should work:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`./mvnw clean package -DQuarkus.kubernetes.deploy=true\n`}</code></pre>\n    <p>{`The last piece is to go to EventStreams console and look at the inventory topic for messages generated. As an alternate we could use `}<a parentName=\"p\" {...{\n        \"href\": \"../../overview/pre-requisites#using-kafdrop\"\n      }}>{`Kafdrop`}</a>{`.`}</p>\n    <h2>{`Another item producer`}</h2>\n    <p>{`We have done a simple app to produce item sale or restock events. The app is not exposed with API defined in Swagger or with JAXRS annotations, but expose one method to be exposed as a service. See the `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/ibm-cloud-architecture/refarch-eda-tools/blob/05fcdcb7d09d674d9eb2cda2e28601171ba51166/item-kafka-producer/src/main/java/ibm/gse/eda/api/ItemSimulatorFunction.java#L18-L25\"\n      }}>{` ItemSimulatorFunction code`}</a>{`. `}</p>\n    <p>{`The simulator is using reactive messaging, but as we mix imperative with reactive programming, the code is using Emitter, and then Munity Multi to create and send the Kafka records:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`@Inject\n@Channel(\"items\")\nEmitter<Item> emitter;\n\n\npublic void sendItems(Integer numberOfRecords) {\n    Multi.createFrom().items(buildItems(numberOfRecords).stream()).subscribe().with(item -> {\n            logger.warning(\"send \" + item.toString());\n            Message<Item> record = KafkaRecord.of(item.storeName,item);\n            emitter.send(record );\n        }, failure -> System.out.println(\"Failed with \" + failure.getMessage()));\n   \n`}</code></pre>\n    <h3>{`Running the application in dev mode`}</h3>\n    <p>{`You can run your application in dev mode that enables live coding using:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`./mvnw quarkus:dev\n`}</code></pre>\n    <p>{`But as we connect to a remote Kafka Cluster you need to define environment variables as:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`KAFKA_BROKERS=....containers.appdomain.cloud:443\nKAFKA_USER=<a>-scram-user\nKAFKA_PASSWORD=<a-password>\nKAFKA_CERT_PATH=\\${PWD}/certs/es-cert.p12\nKAFKA_CERT_PWD=<server-ca-certificate-password>\nSECURE_PROTOCOL=SASL_SSL\n`}</code></pre>\n    <h3>{`Packaging and running the application`}</h3>\n    <p>{`The application can be packaged using `}<inlineCode parentName=\"p\">{`./mvnw package`}</inlineCode>{`.\nIt produces the `}<inlineCode parentName=\"p\">{`item-kafka-producer-1.0.0-SNAPSHOT-runner.jar`}</inlineCode>{` file in the `}<inlineCode parentName=\"p\">{`/target`}</inlineCode>{` directory.\nBe aware that it’s not an `}<em parentName=\"p\">{`über-jar`}</em>{` as the dependencies are copied into the `}<inlineCode parentName=\"p\">{`target/lib`}</inlineCode>{` directory.`}</p>\n    <p>{`The application is now runnable using `}<inlineCode parentName=\"p\">{`java -jar target/item-kafka-producer-1.0.0-SNAPSHOT-runner.jar`}</inlineCode>{`.`}</p>\n    <h3>{`Deployment to OpenShift`}</h3>\n    <p>{`The code includes declaration to build the necessary environment variables, secrets, volumes to get connected to a Kafka cluster using TLS authentication, and deploy in one command:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`mvn package -DskipTests -Dquarkus.kubernetes.deploy=true\n`}</code></pre>\n    <p>{`See the application.properties for `}<inlineCode parentName=\"p\">{`quarkus.openshift.env-vars.*`}</inlineCode>{` settings.`}</p>\n    <p>{`It is also supposed to be deployed as knative app, but there is an issue on the generation of volume declarations in the knative.yaml file, so we could not make it in one command.`}</p>\n    <p>{`The code is also available as docker image: `}<a parentName=\"p\" {...{\n        \"href\": \"https://hub.docker.com/r/ibmcase/item-kafka-producer\"\n      }}>{`ibmcase/item-kafka-producer`}</a>{`.`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      ","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bxTextTruncateEnd\":\"PageHeader-module--bx--text-truncate--end--mZWeX\",\"bxTextTruncateFront\":\"PageHeader-module--bx--text-truncate--front--3zvrI\",\"pageHeader\":\"PageHeader-module--page-header--3hIan\",\"withTabs\":\"PageHeader-module--with-tabs--3nKxA\",\"text\":\"PageHeader-module--text--o9LFq\"};"],"sourceRoot":""}